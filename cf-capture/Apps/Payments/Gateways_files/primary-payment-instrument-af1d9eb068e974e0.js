try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="9018caaa-a554-4833-9eb8-f34ea73803a8",e._sentryDebugIdIdentifier="sentry-dbid-9018caaa-a554-4833-9eb8-f34ea73803a8")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2068],{19545:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[orgId]/settings/billing/primary-payment-instrument",function(){return n(25127)}])},65033:function(e,a,n){"use strict";var s=n(70813),r=n(38220);a.Z=e=>{let{alwaysExpanded:a=!1}=e;return(0,s.jsx)(r.wK,{expandedContent:(0,s.jsx)(r.Uo,{children:(0,s.jsxs)(r.xu,{mt:"xs",children:["Company Entry Description: ",(0,s.jsx)("strong",{children:"Paymentsai"}),(0,s.jsx)("br",{}),"ACH Company ID: ",(0,s.jsx)("strong",{children:"8450479415"}),(0,s.jsx)("br",{}),"Company Name: ",(0,s.jsx)("strong",{children:"Payments.ai,-LLC"})]})}),alwaysExpanded:a,variant:"info",children:"To minimize the risk of failed transactions add Payments AI as a trusted recipient to your Bank."})}},25127:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return S}});var s=n(70813),r=n(38220),t=n(53164),l=n(41240),i=n(18159),d=n(76968),o=n(64529),c=n(44065),u=n(6491),m=n(92864),h=n(55826),x=n(33618),p=n(15261),g=n(43381),j=n(83160),v=n(27897),f=n(12353),y=n(8040),C=n(65033),b=n(19061);function k(e){var a;let{framepayError:n,BankAccountNumberElement:t,BankRoutingNumberElement:l}=e,i=(0,h.useRef)(new Set),{setIsReady:d}=(0,b.p)();(0,h.useEffect)(()=>{d(!1)},[d]);let o=(0,h.useCallback)(()=>{i.current.has("account")&&i.current.has("routing")&&d(!0)},[d]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.DL,{label:"Account number",description:"Your bank account must be a checking account",children:(0,s.jsx)(t,{onReady:()=>{i.current.add("account"),o()}})}),(0,s.jsx)(r.DL,{label:"Routing number",children:(0,s.jsx)(l,{onReady:()=>{i.current.add("routing"),o()}})}),null==n?void 0:null===(a=n.details)||void 0===a?void 0:a.map(e=>(0,s.jsx)(r.Uo,{children:(0,s.jsx)(r.fm,{children:e})},e))]})}let w=e=>{var a,n,t,l,d,o,u,m,p,b,w;let{useUpdatePaymentMethod:P,BankAccountTypeElement:M,defaultValues:N,Framepay:_,...E}=e,I=(0,h.useRef)(null),{formState:{isSubmitted:z,isDirty:S,errors:D},handleSubmit:U,register:F,control:Q,watch:Z}=(0,c.cI)({defaultValues:{...N,address:{...N.address,country:x.Cv.US}},resolver:(0,i.F)(y.W),mode:"onTouched"}),{mutate:R,error:T,isPending:A}=(0,v.ZP)(_,I),{mutate:H,isPending:L}=P(),V=Z("address.country"),B=(0,f.X6)(),G=(0,g.useRouter)(),O=L||A,q=(0,h.useCallback)(()=>{G.push({pathname:"/[orgId]/settings/billing",query:{orgId:B}})},[B,G]),{UnsavedAlert:W}=(0,j.Q)({shouldConfirmLeave:S&&!(O||z),onDiscard:q}),X=U(e=>R({billingAddress:{phoneNumbers:e.phoneNumber?[{label:e.phoneNumber,value:e.phoneNumber}]:void 0,emails:e.email?[{label:e.email,value:e.email}]:void 0,organization:e.organization||void 0,region:e.address.state||void 0,address:e.address.address,country:e.address.country,postalCode:e.address.zip,firstName:e.firstName,lastName:e.lastName,city:e.address.city},method:"ach"},{onSuccess:e=>{H({token:e.id,method:"ach"},{onSuccess:q})}}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{id:"achInstrumentForm",onSubmit:X,ref:I,children:[(0,s.jsxs)(r.xu,{pb:"md",children:[(0,s.jsx)(r.__,{children:"Account type"}),(0,s.jsx)(r.xu,{py:"xs",children:(0,s.jsx)(M,{})})]}),(0,s.jsx)(k,{framepayError:T,...E}),(0,s.jsx)(r.Z0,{mb:"md"}),(0,s.jsxs)(r.rj,{gridTemplateColumns:"1fr 1fr",gridColumnGap:"md",children:[(0,s.jsx)(r.UP,{...F("firstName"),errorMessage:null===(a=D.firstName)||void 0===a?void 0:a.message,autoComplete:"given-name",placeholder:"First name",label:"First name",id:"firstName"}),(0,s.jsx)(r.UP,{...F("lastName"),errorMessage:null===(n=D.lastName)||void 0===n?void 0:n.message,autoComplete:"family-name",placeholder:"Last name",label:"Last name",id:"lastName"})]}),(0,s.jsx)(r.UP,{...F("organization"),errorMessage:null===(t=D.organization)||void 0===t?void 0:t.message,placeholder:"Organization name",label:"Organization",id:"organization",optional:!0}),(0,s.jsx)(r.UP,{...F("address.address"),errorMessage:null===(d=D.address)||void 0===d?void 0:null===(l=d.address)||void 0===l?void 0:l.message,autoComplete:"street-address",placeholder:"Address",label:"Address"}),(0,s.jsxs)(r.rj,{gridTemplateColumns:"1fr 1fr",gridGap:"sm",children:[(0,s.jsx)(r.UP,{...F("address.city"),errorMessage:null===(u=D.address)||void 0===u?void 0:null===(o=u.city)||void 0===o?void 0:o.message,autoComplete:"address-level2",placeholder:"City",label:"City"}),(0,s.jsx)(r.UP,{...F("address.zip"),errorMessage:null===(p=D.address)||void 0===p?void 0:null===(m=p.zip)||void 0===m?void 0:m.message,autoComplete:"postal-code",placeholder:"Postal/ZIP",label:"Postal/ZIP"})]}),(0,s.jsxs)(r.rj,{gridTemplateColumns:(0,x.fj)(V)?"1fr 1fr":"1fr",gridGap:"sm",children:[(0,s.jsx)(c.Qr,{render:e=>{var a,n;let{field:t}=e;return(0,s.jsx)(r.aL,{errorMessage:null==D?void 0:null===(n=D.address)||void 0===n?void 0:null===(a=n.country)||void 0===a?void 0:a.message,onChange:t.onChange,value:t.value,label:"Country",id:t.name})},name:"address.country",control:Q}),(0,x.fj)(V)&&(0,s.jsx)(c.Qr,{render:e=>{var a,n;let{field:t}=e;return(0,s.jsx)(r.mg,{errorMessage:null===(n=D.address)||void 0===n?void 0:null===(a=n.state)||void 0===a?void 0:a.message,options:x.sD[V],value:t.value||void 0,onValueChange:t.onChange,placeholder:"Select state",id:t.name,label:"State"})},name:"address.state",control:Q})]}),(0,s.jsx)(r.D,{errorMessage:null===(b=D.phoneNumber)||void 0===b?void 0:b.message,placeholder:"Phone number",label:"Phone number",autoComplete:"tel",name:"phoneNumber",control:Q}),(0,s.jsx)(r.UP,{...F("email"),errorMessage:null===(w=D.email)||void 0===w?void 0:w.message,placeholder:"Email address",label:"Email address",autoComplete:"email",id:"email"}),(0,s.jsx)(r.xu,{pb:"xl",children:(0,s.jsx)(C.Z,{alwaysExpanded:!0})}),(0,s.jsxs)(r.kC,{justifyContent:"flex-end",alignItems:"center",gridGap:"md",children:[(0,s.jsx)(r.zx,{disabled:O,variant:"secondary",onClick:q,type:"button",size:"lg",children:"Cancel"}),(0,s.jsx)(r.zx,{$loading:O,variant:"primary",type:"submit",size:"lg",children:"Save"})]})]}),(0,s.jsx)(W,{})]})},P=(0,p.withFramePayBankComponent)(e=>{let{usePaymentMethod:a,Framepay:n,...t}=e,{isPending:l,isError:i,refetch:d,data:o}=a();return!n.ready||l?(0,s.jsx)(r.Ib,{loading:!0}):i?(0,s.jsx)(r.Te,{resource:"payment method",retry:()=>d()}):(0,s.jsx)(w,{defaultValues:{...null==o?void 0:o.billingAddress,address:null==o?void 0:o.billingAddress},Framepay:n,...t})});function M(e){let{useUpdatePaymentMethod:a=m.me,usePaymentMethod:n=m.QN}=e;return(0,s.jsx)(P,{useUpdatePaymentMethod:a,usePaymentMethod:n})}var N=n(81721);let _=u.z.object({paymentMethod:u.z.enum(["cc","ach"])});function E(){let{control:e,watch:a}=(0,c.cI)({resolver:(0,i.F)(_),defaultValues:{paymentMethod:"ach"},mode:"onTouched"}),n=a("paymentMethod"),{isReady:t,setIsReady:l}=(0,b.p)(),u=(0,h.useCallback)(e=>{e!==n&&l(!1)},[l,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Qr,{render:e=>{let{field:a}=e;return(0,s.jsx)(r.Ee.Root,{onValueChange:a.onChange,value:a.value,name:a.name,required:!0,children:(0,s.jsxs)(r.kC,{flexDirection:"column",gridGap:"md",pb:"xl",children:[(0,s.jsxs)(r.kC,{flexDirection:"column",width:"100%",children:[(0,s.jsxs)(r.t0.Root,{checked:"ach"===a.value,variant:"lg",disabled:!t,onClick:()=>u("ach"),children:[(0,s.jsx)(r.t0.Icon,{variant:"md",children:(0,s.jsx)(d.Z,{})}),(0,s.jsxs)(r.kC,{justifyContent:"space-between",alignItems:"center",width:"100%",gap:"spacing10",children:[(0,s.jsx)(r.xv,{fontSize:"bodySmall",fontFamily:"heading",children:"ACH (Recommended)"}),(0,s.jsx)(r.Ee.Item,{variant:"md",value:"ach",radioPosition:"right"})]})]}),"ach"===n&&(0,s.jsx)(r.xu,{pt:"xs",children:(0,s.jsx)(r.xv,{fontSize:"small",color:"pickledBluewood",children:"ACH is only available for U.S. based financial institutions."})})]}),(0,s.jsxs)(r.kC,{flexDirection:"column",width:"100%",children:[(0,s.jsxs)(r.t0.Root,{checked:"cc"===a.value,variant:"lg",disabled:!t,onClick:()=>u("cc"),children:[(0,s.jsx)(r.t0.Icon,{variant:"md",children:(0,s.jsx)(o.Z,{})}),(0,s.jsx)(r.kC,{justifyContent:"space-between",alignItems:"center",width:"100%",gap:"spacing10",children:(0,s.jsx)(r.xv,{fontSize:"bodySmall",fontFamily:"heading",children:"Credit Card"})}),(0,s.jsx)(r.Ee.Item,{variant:"md",value:"cc",radioPosition:"right"})]}),"cc"===n&&(0,s.jsx)(r.xu,{pt:"xs",children:(0,s.jsxs)(r.xv,{fontSize:"small",color:"pickledBluewood",children:["Credit/Debit card Fee:"," ",(0,s.jsx)(r.xv,{fontSize:"small",fontWeight:"semibold",as:"span",children:"3%"})]})})]})]})})},name:"paymentMethod",control:e}),"cc"===n&&(0,s.jsx)(N.Z,{instrumentType:"primary",useUpdatePaymentMethod:m.me,usePaymentMethod:m.QN}),"ach"===n&&(0,s.jsx)(M,{useUpdatePaymentMethod:m.me,usePaymentMethod:m.QN})]})}var I=n(46847);let z=()=>(0,s.jsxs)(r.QQ.Root,{children:[(0,s.jsx)(r.QQ.Header,{children:(0,s.jsx)(r.QQ.Title,{children:"Primary payment instrument"})}),(0,s.jsx)(r.QQ.Content,{children:(0,s.jsx)(I.Z,{children:(0,s.jsx)(b.b,{children:(0,s.jsx)(E,{})})})})]});z.getLayout=e=>(0,s.jsx)(t.Z,{children:(0,s.jsx)(l.Z,{children:e})});var S=z},64529:function(e,a,n){"use strict";var s=n(55826);let r=s.forwardRef(function({title:e,titleId:a,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 19",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true","data-slot":"icon",height:16,width:16,ref:r,"aria-labelledby":a},n),e?s.createElement("title",{id:a},e):null,s.createElement("path",{stroke:"url(#paint0_linear_6905_6095)",strokeLinecap:"square",strokeMiterlimit:10,strokeWidth:1.5,d:"M4.99953 13.5H11.9995M15.9995 13.5H18.9995M15.5933 8.69623C15.8563 8.35299 15.9988 7.93263 15.9988 7.50023C15.9988 7.06782 15.8563 6.64747 15.5933 6.30423M17.9939 10.4965C18.6458 9.63354 18.9985 8.58153 18.9985 7.50002C18.9985 6.41851 18.6458 5.3665 17.9939 4.50352M21.4993 17.5002H2.49928C2.30128 17.5039 2.10459 17.4676 1.92094 17.3935C1.7373 17.3194 1.57048 17.209 1.43046 17.069C1.29043 16.929 1.18008 16.7622 1.10599 16.5785C1.03191 16.3949 0.995612 16.1982 0.999276 16.0002V3.00019C0.995612 2.8022 1.03191 2.6055 1.10599 2.42186C1.18008 2.23822 1.29043 2.0714 1.43046 1.93137C1.57048 1.79135 1.7373 1.68099 1.92094 1.60691C2.10459 1.53282 2.30128 1.49653 2.49928 1.50019H21.4993C21.6973 1.49653 21.894 1.53282 22.0776 1.60691C22.2613 1.68099 22.4281 1.79135 22.5681 1.93137C22.7081 2.0714 22.8185 2.23822 22.8926 2.42186C22.9666 2.6055 23.0029 2.8022 22.9993 3.00019V16.0002C23.0029 16.1982 22.9666 16.3949 22.8926 16.5785C22.8185 16.7622 22.7081 16.929 22.5681 17.069C22.4281 17.209 22.2613 17.3194 22.0776 17.3935C21.894 17.4676 21.6973 17.5039 21.4993 17.5002ZM4.99953 5.49996H8.49953V8.49996H4.99953V5.49996Z"}),s.createElement("defs",null,s.createElement("linearGradient",{id:"paint0_linear_6905_6095",x1:16.0238,x2:12.677,y1:1.49994,y2:18.8149,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#062DF7"}),s.createElement("stop",{offset:1,stopColor:"#06BDF7"}))))});a.Z=r}},function(e){e.O(0,[6843,3993,2627,5953,8159,1591,3561,7382,9855,3164,3194,2888,9774,179],function(){return e(e.s=19545)}),_N_E=e.O()}]);