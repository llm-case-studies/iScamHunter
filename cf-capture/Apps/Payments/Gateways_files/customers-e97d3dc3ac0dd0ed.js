try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="00bedae8-1169-48a7-96fa-e9a395a2447b",e._sentryDebugIdIdentifier="sentry-dbid-00bedae8-1169-48a7-96fa-e9a395a2447b")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6397],{77203:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[orgId]/customers",function(){return n(82518)}])},1222:function(e,t,n){"use strict";var r=n(31791),i=n(70813),s=n(31733),l=n(68437),a=n(50288);function o(){let e=(0,r._)(["\n  transition: all 300ms;\n  cursor: pointer;\n  opacity: 0.4;\n  color: ",";\n\n  &:hover {\n    color: ",";\n    opacity: 1;\n  }\n"]);return o=function(){return e},e}function d(){let e=(0,r._)(["\n  all: unset;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  border-radius: ",";\n  &:focus-visible {\n    outline: -webkit-focus-ring-color auto thin;\n    outline: revert;\n  }\n"]);return d=function(){return e},e}let c=(0,a.zo)(s.Z)(o(),l.Q2.colors.dustGray,l.Q2.colors.blueRibbon),u=a.zo.button.attrs({type:"button"})(d(),l.Q2.radii.full);t.Z=e=>(0,i.jsx)(u,{...e,children:(0,i.jsx)(c,{})})},57052:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(70813),i=n(38220),s=n(55826),l=n(75666);function a(e,t){let n=Math.max(Math.min(t<0?e.length+t:t,e.length),0);return[e.slice(0,n),e.slice(n)]}var o=n(31552);function d(){return(0,r.jsx)("div",{onKeyDown:e=>e.preventDefault(),onKeyUp:e=>e.preventDefault(),children:(0,r.jsxs)(i.J2.Root,{children:[(0,r.jsx)(i.J2.Trigger,{asChild:!0,children:(0,r.jsx)(i.Ct,{variant:"transparent",children:"Discounted"})}),(0,r.jsxs)(i.J2.Content,{children:[(0,r.jsx)(i.J2.Title,{children:(0,r.jsxs)(i.kC,{flexDirection:"column",gridGap:"xs",children:[(0,r.jsx)(i.Ct,{variant:"transparent",children:"Discounted"}),"Discounted"]})}),(0,r.jsx)(i.J2.Description,{children:"The Discounted tag is assigned to customers who took advantage of partial payment when we attempted to charge them using Subscriptions dunning rule. Enabling this tag is configurable."})]})]})})}function c(){return(0,r.jsx)("div",{onKeyDown:e=>e.preventDefault(),onKeyUp:e=>e.preventDefault(),children:(0,r.jsxs)(i.J2.Root,{children:[(0,r.jsx)(i.J2.Trigger,{asChild:!0,children:(0,r.jsx)(i.Ct,{variant:"vip",children:"VIP"})}),(0,r.jsxs)(i.J2.Content,{children:[(0,r.jsx)(i.J2.Title,{children:(0,r.jsxs)(i.kC,{flexDirection:"column",gridGap:"xs",children:[(0,r.jsx)(i.Ct,{variant:"vip",children:"VIP"}),"VIP Customer"]})}),(0,r.jsx)(i.J2.Description,{children:"A VIP Customer may be subject to special rules and exceptions."})]})]})})}function u(e){let{tag:t}=e;switch(t){case o.$q.VIP:return(0,r.jsx)(c,{});case o.$q.DISCOUNTED:return(0,r.jsx)(d,{});default:return null}}function h(e){let{tags:t}=e,[n,o]=(0,s.useMemo)(()=>(function(...e){return(0,l.a)(a,e)})(t,2),[t]);return(0,r.jsxs)(i.kC,{gridGap:"spacing6",children:[n.map(e=>(0,r.jsx)(u,{tag:e},e)),o.length>0?(0,r.jsxs)(i.u.Root,{children:[(0,r.jsx)(i.u.Trigger,{children:(0,r.jsxs)(i.Ct,{variant:"transparent",children:["+$",o.length]})}),(0,r.jsx)(i.u.Content,{children:o.map(e=>e).join(" ")})]}):null]})}},53679:function(e,t,n){"use strict";n.d(t,{D:function(){return h},Z:function(){return x}});var r=n(51685),i=n(23808),s=n(53431),l=n(94216),a=n(12353),o=n(85404),d=n(36902),c=n(97687),u=e=>{var t,n,r,i,s,l;let{sortDirection:a,filters:o,sortBy:d,limit:u,page:h}=e,{primaryPaymentInstrumentMethods:x,showTestData:m,lastPayment:f,countries:j,created:g,revenue:p,search:v,tags:C}=o;return{sortDirection:a,showTestData:m,offset:(h-1)*u,sortBy:d,limit:u,...v&&{search:v},...j&&{countries:j},...x&&{primaryPaymentInstrumentMethods:x},...C&&{tags:C},...(null==g?void 0:null===(t=g.value)||void 0===t?void 0:t.to)&&{createdTo:(0,c.i)(g.value.to).toISOString()},...(null==g?void 0:null===(n=g.value)||void 0===n?void 0:n.from)&&{createdFrom:g.value.from.toISOString()},...(null==f?void 0:null===(r=f.value)||void 0===r?void 0:r.to)&&{lastPaymentTo:(0,c.i)(f.value.to).toISOString()},...(null==f?void 0:null===(i=f.value)||void 0===i?void 0:i.from)&&{lastPaymentFrom:f.value.from.toISOString()},...(null==p?void 0:null===(s=p.value)||void 0===s?void 0:s.to)&&{revenueMax:p.value.to},...(null==p?void 0:null===(l=p.value)||void 0===l?void 0:l.from)&&{revenueMin:p.value.from}}};let h="CUSTOMERS";function x(e){let t=(0,r.xp)(e),[n]=(0,d.S)(),c=(0,a.X6)(),x=u({...t,filters:{...t.filters,showTestData:n}});return{resourceReport:(0,o.Z)(()=>l.w.sendCustomersReportEmail(c,s.a(x,["limit","offset"]))),pagination:t,customers:(0,i.a)({queryFn:()=>l.w.getCustomers(c,x),queryKey:[c,h,x],select:e=>e.data,enabled:!!c})}}},63224:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(70813),i=n(16168),s=n(29039),l=n(77346);function a(e){let{instrument:t}=e,n=(0,l.pd)(t)?i.Z[t.creditCard.brand]:s.R[t.method];return(0,r.jsxs)("span",{children:[(0,r.jsx)(n,{style:{verticalAlign:"middle",width:"auto",height:16}})," ",(0,l.qW)(t)]})}},97268:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(31791),i=n(70813),s=n(55826);let l=s.forwardRef(function({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true","data-slot":"icon",height:24,width:24,ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("circle",{cx:12,cy:12,r:12,fill:"white",fillOpacity:.2}),s.createElement("circle",{cx:12,cy:12,r:6,fill:"#1B8A81"}),s.createElement("path",{fill:"white",d:"M13.3641 14.2695L13.2709 14.6546C12.9548 14.7802 11.8597 15.3071 11.2281 14.7464C11.0399 14.5797 10.9458 14.3678 10.9458 14.1111C10.9458 13.6299 11.103 13.2104 11.385 12.2031C11.4346 12.0131 11.4955 11.7659 11.4955 11.5699C11.4955 11.2321 11.3685 11.1422 11.0235 11.1422C10.8551 11.1422 10.6687 11.2027 10.5 11.2662L10.5935 10.8812C10.9696 10.727 11.4419 10.5391 11.8466 10.5391C12.4536 10.5391 12.8997 10.8443 12.8997 11.4247C12.8997 11.5921 12.8711 11.885 12.8108 12.0877L12.4618 13.3326C12.3899 13.5844 12.259 14.139 12.4612 14.3036C12.6606 14.466 13.1317 14.3801 13.3641 14.2695Z"}),s.createElement("path",{fill:"white",d:"M12.7369 9.78542C13.1574 9.78542 13.4982 9.4417 13.4982 9.01771C13.4982 8.59371 13.1574 8.25 12.7369 8.25C12.3164 8.25 11.9756 8.59371 11.9756 9.01771C11.9756 9.4417 12.3164 9.78542 12.7369 9.78542Z"}))});var a=n(68437),o=n(38220),d=n(72942),c=n(50288),u=n(36902);function h(){let e=(0,r._)(["\n  padding: "," ",";\n\n  font-size: ",";\n  color: ",";\n  background: #196a63;\n\n  &:active,\n  &:focus,\n  &:hover {\n    box-shadow: 0px 0px 0px 2px ",";\n  }\n"]);return h=function(){return e},e}let x=(0,c.zo)(o.zx)(h(),a.Q2.space.xs,a.Q2.space.md,a.Q2.fontSizes.bodySmall,a.Q2.colors.white,(0,d.$n)(.2,a.Q2.colors.celadonGreen));function m(){let[e,t]=(0,u.S)();if(e)return(0,i.jsx)(o.kC,{borderTop:"1px solid ".concat(a.Q2.colors.celadonGreen),zIndex:a.Q2.zIndices[700],justifyContent:"center",alignItems:"center",position:"sticky",width:"100%",left:"0",top:"0",children:(0,i.jsxs)(o.kC,{style:{transform:"translateY(-1px)"},backgroundColor:"celadonGreen",borderBottomRightRadius:"md",borderBottomLeftRadius:"md",alignItems:"center",gridGap:"xs",py:"xxs",px:"sm",children:[(0,i.jsx)(l,{}),(0,i.jsx)(o.xv,{fontWeight:"semibold",fontSize:"bodySmall",color:"white",children:"Test mode"}),(0,i.jsx)(x,{onClick:()=>t(!1),size:"md",tabIndex:0,children:"Leave"})]})})}},64268:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(70813),i=n(68437),s=n(38220),l=n(36902);function a(e){let{children:t}=e,[n]=(0,l.S)();return(0,r.jsx)(s.xu,{background:n?i.Q2.colors.azure:"initial",style:{transform:"translateY(1px)"},minHeight:"100%",children:t})}},38827:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(70813),i=n(93133),s=n(38220),l=n(55826),a=n(88600),o=function(e,t,n){if(!a.jU)return[t,a.ZT,a.ZT];if(!e)throw Error("useLocalStorage key may not be falsy");var r=n?n.raw?function(e){return e}:n.deserializer:JSON.parse,i=(0,l.useRef)(function(e){try{var i=n?n.raw?String:n.serializer:JSON.stringify,s=localStorage.getItem(e);if(null!==s)return r(s);return t&&localStorage.setItem(e,i(t)),t}catch(e){return t}}),s=(0,l.useState)(function(){return i.current(e)}),o=s[0],d=s[1];(0,l.useLayoutEffect)(function(){return d(i.current(e))},[e]);var c=(0,l.useCallback)(function(t){try{var i="function"==typeof t?t(o):t;if(void 0===i)return;var s=void 0;s=n?n.raw?"string"==typeof i?i:JSON.stringify(i):n.serializer?n.serializer(i):JSON.stringify(i):JSON.stringify(i),localStorage.setItem(e,s),d(r(s))}catch(e){}},[e,d]);return[o,c,(0,l.useCallback)(function(){try{localStorage.removeItem(e),d(void 0)}catch(e){}},[e,d])]},d=n(1222),c=n(27064),u=n(36902);function h(e){let{popoverId:t}=e,[n,a]=(0,u.S)(),{handleOpen:h,setChecked:x,checked:m,open:f}=function(e){let[t,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)(!1),[s,a]=o("testModePopoverDontShowAgain_"+e),[d]=(0,u.S)();return(0,l.useEffect)(()=>{let e="true"===s;d||(n(!e),i(e))},[s,d]),{handleOpen:e=>{r?a("true"):a(null),n(e)},setChecked:i,checked:r,open:t}}(t);return(0,r.jsxs)(s.kC,{justifyContent:"flex-end",alignItems:"center",minWidth:"17rem",children:[(0,r.jsxs)(s.J2.Root,{onOpenChange:h,open:f,children:[(0,r.jsx)(s.J2.Trigger,{asChild:!0,children:(0,r.jsx)(d.Z,{})}),(0,r.jsxs)(s.J2.Content,{children:[(0,r.jsx)(s.J2.Title,{icon:(0,r.jsx)(i.Z,{}),children:"Test mode data"}),(0,r.jsxs)(s.J2.Description,{children:["Test mode allows you to validate data from test funnels. For more information, check the"," ",(0,r.jsx)(s.ee,{href:c.DM,rel:"noopener noreferrer",target:"_blank",children:"documentation"}),"."]}),(0,r.jsx)(s.J2.Action,{children:(0,r.jsx)(s.ji,{label:(0,r.jsx)(s.xv,{fontSize:"bodySmall",color:"waterloo",children:"Don't show this again"}),onCheckedChange:e=>x(e),id:"testModeCheckbox",checked:m,variant:"md"})})]})]}),(0,r.jsx)(s.KV,{label:!n&&(0,r.jsx)(s.xu,{as:"span",ml:"xs",children:"Show test data"}),onCheckedChange:a,checked:n})]})}},82518:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var r=n(31791),i=n(70813),s=n(39728),l=n(68437),a=n(38220),o=n(43381),d=n(50288),c=n(75385),u=n(53164),h=n(53679),x=n(38421),m=n(81213),f=n(36902),j=n(38827),g=n(33618),p=n(11661),v=n(27525),C=n(41977),y=n(31552);let b=[{value:"payment-card",label:"Card"},{label:"Bank account",value:"ach"},{label:"Cash",value:"cash"}],w=[{value:y.$q.VIP,label:"VIP Customer"},{value:y.$q.DISCOUNTED,label:"Discounted Customer"}];var S=n(7004);function P(e){let{pagination:t}=e,{data:n}=(0,S.Z)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{label:(0,i.jsxs)(i.Fragment,{children:["Lifetime Revenue",(0,i.jsx)(v.Z,{onClear:()=>t.updateFilter({revenue:void 0}),value:t.filters.revenue})]}),onChange:e=>t.updateFilter({revenue:e}),value:t.filters.revenue,name:"Lifetime Revenue"}),(0,i.jsx)(a.If,{label:(0,i.jsxs)(i.Fragment,{children:["Country",(0,i.jsx)(v.Z,{onClear:()=>t.updateFilter({countries:void 0}),value:t.filters.countries})]}),onChange:e=>t.updateFilter({countries:e}),value:t.filters.countries||[],options:g.Go,placeholder:"All"}),(0,i.jsx)(a.If,{label:(0,i.jsxs)(i.Fragment,{children:["Prim. Payment Instrument",(0,i.jsx)(v.Z,{onClear:()=>t.updateFilter({primaryPaymentInstrumentMethods:void 0}),value:t.filters.primaryPaymentInstrumentMethods})]}),onChange:e=>t.updateFilter({primaryPaymentInstrumentMethods:e}),value:t.filters.primaryPaymentInstrumentMethods||[],options:b,placeholder:"All"}),(0,i.jsx)(a.SP,{label:(0,i.jsxs)(i.Fragment,{children:["Last Payment",(0,i.jsx)(v.Z,{onClear:()=>t.updateFilter({lastPayment:void 0}),value:t.filters.lastPayment})]}),id:"last-payment",children:(0,i.jsx)(C.Z,{from:(null==n?void 0:n.createdAt)?new Date(n.createdAt):new Date,onChange:e=>t.updateFilter({lastPayment:e}),value:t.filters.lastPayment,id:"last-payment"})}),(0,i.jsx)(a.SP,{label:(0,i.jsxs)(i.Fragment,{children:["Created",(0,i.jsx)(v.Z,{onClear:()=>t.updateFilter({created:void 0}),value:t.filters.created})]}),id:"created",children:(0,i.jsx)(C.Z,{from:(null==n?void 0:n.createdAt)?new Date(n.createdAt):new Date,onChange:e=>t.updateFilter({created:e}),value:t.filters.created,id:"created"})}),(0,i.jsx)(a.If,{label:(0,i.jsxs)(i.Fragment,{children:["Customer tags",(0,i.jsx)(v.Z,{onClear:()=>t.updateFilter({tags:void 0}),value:t.filters.tags})]}),onChange:e=>t.updateFilter({tags:e}),value:t.filters.tags||[],options:w,placeholder:"All"})]})}function I(e){var t;let{resourceReport:n,pagination:r,customers:s}=e,[o,d]=(0,f.S)(),{isOpen:u,toggleFilters:h}=(0,c.pW)();return(0,i.jsx)(a.xu,{borderTop:"1px solid ".concat(l.Q2.colors.mystic),children:(0,i.jsxs)(m.O.Root,{children:[(0,i.jsxs)(m.O.Header,{children:[(0,i.jsx)(m.O.Search,{onChange:e=>r.updateFilter({search:e}),resetHandler:()=>r.updateFilter({search:""}),value:r.filters.search}),(0,i.jsxs)(a.kC,{alignItems:"center",gridGap:"md",ml:"auto",children:[(0,i.jsx)(a.RQ,{children:(0,i.jsx)(j.Z,{popoverId:"customers"})}),(0,i.jsx)(m.O.Button,{onClick:h,count:r.getActiveFiltersCount()}),(0,i.jsxs)(a.Lt.Root,{children:[(0,i.jsx)(a.Lt.Trigger,{disabled:n.isPending,asChild:!0,children:(0,i.jsx)(a.op,{"aria-label":"Customers actions",size:"lg"})}),(0,i.jsxs)(a.Lt.Content,{align:"end",children:[(0,i.jsxs)(a.Lt.Item,{onClick:()=>n.mutate({}),disabled:!(null===(t=s.data)||void 0===t?void 0:t.data.length),children:[(0,i.jsx)(x.Z,{})," Send CSV with selected customers to mail"]}),(0,i.jsx)(a._e,{children:(0,i.jsx)(a.Lt.CheckboxItem,{onCheckedChange:e=>d(!!e),checked:o,children:"Show test data"})})]})]})]})]}),u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a._e,{children:(0,i.jsx)(a.dy.Root,{onOpenChange:h,open:!0,children:(0,i.jsxs)(a.dy.Content,{children:[(0,i.jsx)(a.dy.Header,{children:(0,i.jsx)(a.dy.Title,{children:"Filters"})}),(0,i.jsx)(a.dy.Section,{children:(0,i.jsx)(a.kC,{flexDirection:"column",children:(0,i.jsx)(P,{pagination:r})})}),r.getActiveFiltersCount()>0&&(0,i.jsx)(a.dy.Action,{children:(0,i.jsx)(a.kC,{justifyContent:"end",py:"xs",children:(0,i.jsx)(m.O.Clear,{count:r.getActiveFiltersCount(),clear:r.clearFilters})})})]})})}),(0,i.jsx)(a.RQ,{children:(0,i.jsx)(a.Uo,{children:(0,i.jsx)(m.O.Content,{children:(0,i.jsxs)(a.kC,{justifyContent:"space-between",gridGap:"md",children:[(0,i.jsx)(m.O.Grid,{children:(0,i.jsx)(P,{pagination:r})}),(0,i.jsx)(m.O.Clear,{count:r.getActiveFiltersCount(),clear:r.clearFilters})]})})})})]})]})})}var k=n(66843),Z=n.n(k),A=n(57052),F=n(12353),D=n(63224),R=n(31585),T=n(81363),O=n(82901),E=n(59193);function z(){let e=(0,r._)(["\n  max-width: 10rem;\n"]);return z=function(){return e},e}function _(){let e=(0,r._)(["\n  font-weight: ",";\n"]);return _=function(){return e},e}let J=(0,d.zo)(a.iA.BodyCell)(z()),L=(0,d.zo)(J)(_(),l.Q2.fontWeights.semibold);function Q(e){var t;let{customers:n}=e,[r]=(0,f.S)(),s=(0,F.X6)();return n.isPending?(0,i.jsx)(a.iA.Loading,{columns:8}):null===(t=n.data)||void 0===t?void 0:t.data.map(e=>(0,i.jsx)(Z(),{href:{query:{customerId:e.id,orgId:s,...r&&{[R.l]:"1"}},pathname:"/[orgId]/customers/[customerId]"},legacyBehavior:!0,passHref:!0,children:(0,i.jsxs)(a.iA.LinkRow,{children:[(0,i.jsx)(J,{children:e.name||e.email}),(0,i.jsx)(J,{children:e.email}),(0,i.jsx)(J,{children:(0,i.jsx)(a.kC,{alignItems:"center",gridGap:"xxs",children:e.origin&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.AW,{iso:e.origin||""}),g.jT[e.origin]]})})}),(0,i.jsx)(L,{children:(0,g.ed)({currency:e.lifetimeRevenue.currency,value:e.lifetimeRevenue.amount})}),(0,i.jsx)(J,{children:(0,i.jsx)(A.Z,{tags:e.tags||[]})}),(0,i.jsx)(J,{children:e.primaryPaymentInstrument&&(0,i.jsx)(D.Z,{instrument:e.primaryPaymentInstrument})}),(0,i.jsx)(J,{children:e.lastPaymentTime?(0,g.s6)(e.lastPaymentTime):null}),(0,i.jsx)(J,{children:(0,g.s6)(e.createdAt)})]})},e.id))}function N(e){var t;let{pagination:n,customers:r}=e,[s]=(0,f.S)(),{isAtMaximumPage:l,adjustedTotalCount:o}=(0,E.V)({totalCount:(null===(t=r.data)||void 0===t?void 0:t.totalCount)||0,pagination:n}),{openFilters:d}=(0,c.pW)();return r.isError?(0,i.jsx)(a.Te,{retry:()=>r.refetch(),resource:"customers"}):r.isSuccess&&0===r.data.data.length?(0,i.jsx)(a.ML,{description:s?"You can add test customers via test channels outside of Payments AI":"No customers found for this filter. Please use a different one",search:n.filters.search,title:"No customers found"}):(0,i.jsxs)("div",{children:[(0,i.jsxs)(a.kC,{justifyContent:"end",pb:"sm",children:[r.isSuccess&&(0,i.jsx)(a.vI,{totalCount:o,onPageChange:n.updatePage,currentPage:n.page,perPage:n.limit}),r.isPending&&(0,i.jsx)(T.Z,{width:100,height:20.5})]}),(0,i.jsxs)(a.iA.Root,{children:[(0,i.jsx)(a.iA.Header,{children:(0,i.jsxs)(a.iA.HeaderRow,{children:[(0,i.jsx)(a.iA.HeaderCell,{children:"Name"}),(0,i.jsx)(a.iA.HeaderCell,{...n.getSortingProps("email"),children:"Email"}),(0,i.jsx)(a.iA.HeaderCell,{...n.getSortingProps("country"),children:"Country"}),(0,i.jsx)(a.iA.HeaderCell,{...n.getSortingProps("lifetimeRevenue"),children:"Lifetime revenue"}),(0,i.jsx)(a.iA.HeaderCell,{children:"Customer tag"}),(0,i.jsx)(a.iA.HeaderCell,{children:"Prim. payment instrument"}),(0,i.jsx)(a.iA.HeaderCell,{...n.getSortingProps("lastPaymentTime"),children:"Last payments"}),(0,i.jsx)(a.iA.HeaderCell,{...n.getSortingProps("createdAt"),children:"Created"})]})}),(0,i.jsx)(a.iA.Body,{children:!l&&(0,i.jsx)(Q,{customers:r})})]}),l&&(0,i.jsx)(O.h,{onShowFilters:d}),(0,i.jsxs)(a.kC,{justifyContent:"end",pt:"sm",children:[r.isSuccess&&(0,i.jsx)(a.vI,{totalCount:o,onPageChange:n.updatePage,currentPage:n.page,perPage:n.limit}),r.isPending&&(0,i.jsx)(T.Z,{width:100,height:20.5})]})]})}function M(e){var t;let{pagination:n,customers:r}=e,[s]=(0,f.S)(),l=(0,F.X6)(),{isAtMaximumPage:o,adjustedTotalCount:d}=(0,E.V)({totalCount:(null===(t=r.data)||void 0===t?void 0:t.totalCount)||0,pagination:n}),{openFilters:u}=(0,c.pW)();return r.isPending?Array.from({length:n.limit}).map((e,t)=>(0,i.jsxs)(a.QU,{children:[(0,i.jsx)(T.Z,{width:200}),(0,i.jsx)(a.kC,{justifyContent:"end",children:(0,i.jsx)(T.Z,{width:150})}),(0,i.jsx)("div",{}),(0,i.jsx)(a.kC,{justifyContent:"end",children:(0,i.jsx)(T.Z,{width:150})})]},t)):r.isError?(0,i.jsx)(a.Te,{retry:()=>r.refetch(),resource:"customers"}):0===r.data.data.length?(0,i.jsx)(a.ML,{description:s?"You can add test customers via test channels outside of Payments AI":"No customers found for this filter. Please use a different one",search:n.filters.search,title:"No customers found"}):(0,i.jsxs)("div",{children:[(0,i.jsx)(a.kC,{justifyContent:"end",pb:"md",pr:"md",children:(0,i.jsx)(a.vI,{totalCount:d,onPageChange:n.updatePage,currentPage:n.page,perPage:n.limit})}),!o&&r.data.data.map(e=>(0,i.jsx)(Z(),{href:{query:{customerId:e.id,orgId:l,...s&&{[R.l]:"1"}},pathname:"/[orgId]/customers/[customerId]"},style:{display:"contents"},children:(0,i.jsxs)(a.QU,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.xv,{color:"pickledBluewood",pb:"spacing6",children:e.name||e.email}),(0,i.jsx)(A.Z,{tags:e.tags||[]})]}),(0,i.jsx)(a.xv,{fontWeight:"semibold",textAlign:"right",children:(0,g.ed)({currency:e.lifetimeRevenue.currency,value:e.lifetimeRevenue.amount})}),(0,i.jsx)(a.xv,{color:"pickledBluewood",children:e.primaryPaymentInstrument&&(0,i.jsx)(D.Z,{instrument:e.primaryPaymentInstrument})}),(0,i.jsx)(a.xv,{textAlign:"right",color:"waterloo",children:(0,g.s6)(e.createdAt)})]})},e.id)),o&&(0,i.jsx)(O.h,{onShowFilters:u}),(0,i.jsx)(a.kC,{justifyContent:"end",pt:"md",pr:"md",children:(0,i.jsx)(a.vI,{totalCount:d,onPageChange:n.updatePage,currentPage:n.page,perPage:n.limit})})]})}var H=n(97268),G=n(64268),B=n(13879);function V(){let e=(0,r._)(["\n  padding: 0 ",";\n  @media "," {\n    padding: 0 ",";\n  }\n"]);return V=function(){return e},e}let q=d.zo.div(V(),l.Q2.space["4xl"],l.Q2.mediaQueries.mobile,l.Q2.space.lg),U=()=>{var e,t;let n=(0,o.useRouter)(),r=(0,B.Z)(null===(e=n.query)||void 0===e?void 0:e.period),{resourceReport:l,pagination:d,customers:u}=(0,h.Z)({defaultFilters:{created:r}});return(0,i.jsxs)(G.Z,{children:[(0,i.jsx)(H.Z,{}),(0,i.jsxs)(a.xu,{pt:{desktop:"2xl",mobile:"xl"},pb:"md",children:[(0,i.jsx)(q,{children:(0,i.jsxs)(a.xv,{color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",fontSize:"h5",pb:"xl",children:[(0,i.jsx)(s.Z,{})," Customers"," ",(0,i.jsx)(a.xv,{fontFamily:"inherit",fontSize:"inherit",color:"waterloo",as:"span",children:(0,i.jsx)(a.iG,{value:(null===(t=u.data)||void 0===t?void 0:t.totalCount)||0})})]})}),(0,i.jsxs)(c.Jm,{children:[(0,i.jsx)(a.xu,{pb:"lg",children:(0,i.jsx)(I,{resourceReport:l,pagination:d,customers:u})}),(0,i.jsxs)(a.Uo,{children:[(0,i.jsx)(a._e,{children:(0,i.jsx)(M,{pagination:d,customers:u})}),(0,i.jsx)(a.RQ,{children:(0,i.jsx)(q,{children:(0,i.jsx)(N,{pagination:d,customers:u})})})]})]})]})]})};U.getLayout=e=>(0,i.jsx)(u.Z,{children:e});var W=U},13879:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(33618),i=n(6491);let s=i.z.object({value:i.z.object({from:i.z.coerce.date().optional(),to:i.z.coerce.date().optional()}),id:i.z.nativeEnum(r.tN)});function l(e){try{return s.parse(JSON.parse(e))}catch(e){return}}},31733:function(e,t,n){"use strict";var r=n(55826);let i=r.forwardRef(function({title:e,titleId:t,...n},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",style:{flexShrink:0,display:"inline-block"},stroke:"currentColor","aria-hidden":"true","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("circle",{cx:8,cy:8,r:7.5}),r.createElement("path",{fill:"currentColor",d:"m9.778 11.448-.121.502c-.412.164-1.84.85-2.663.12a1.06 1.06 0 0 1-.368-.829c0-.627.205-1.174.573-2.487.064-.247.144-.57.144-.825 0-.44-.166-.558-.616-.558-.22 0-.462.08-.682.162l.122-.502c.49-.2 1.106-.446 1.633-.446.792 0 1.373.398 1.373 1.155 0 .218-.037.6-.116.864l-.455 1.623c-.093.328-.264 1.05 0 1.265.26.212.874.1 1.176-.044M8.962 5.602A.997.997 0 0 0 9.955 4.6c0-.553-.444-1.001-.993-1.001a.997.997 0 0 0-.992 1c0 .553.444 1.002.992 1.002"}))});t.Z=i}},function(e){e.O(0,[6843,3993,2627,5953,8159,7912,7382,9855,3164,7658,2167,2888,9774,179],function(){return e(e.s=77203)}),_N_E=e.O()}]);