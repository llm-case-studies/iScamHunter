try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cd09d421-a220-4e74-9d93-024b299af381",e._sentryDebugIdIdentifier="sentry-dbid-cd09d421-a220-4e74-9d93-024b299af381")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5110],{1222:function(e,t,n){var a=n(31791),l=n(70813),r=n(31733),i=n(68437),s=n(50288);function o(){let e=(0,a._)(["\n  transition: all 300ms;\n  cursor: pointer;\n  opacity: 0.4;\n  color: ",";\n\n  &:hover {\n    color: ",";\n    opacity: 1;\n  }\n"]);return o=function(){return e},e}function d(){let e=(0,a._)(["\n  all: unset;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  border-radius: ",";\n  &:focus-visible {\n    outline: -webkit-focus-ring-color auto thin;\n    outline: revert;\n  }\n"]);return d=function(){return e},e}let u=(0,s.zo)(r.Z)(o(),i.Q2.colors.dustGray,i.Q2.colors.blueRibbon),c=s.zo.button.attrs({type:"button"})(d(),i.Q2.radii.full);t.Z=e=>(0,l.jsx)(c,{...e,children:(0,l.jsx)(u,{})})},50772:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(70813),l=n(38220),r=n(33618);function i(e){let{currency:t=r.NE.USD,value:n}=e;return(0,a.jsxs)(l.u.Root,{children:[(0,a.jsx)(l.u.Trigger,{children:(0,a.jsx)("span",{children:(0,r.ed)({notation:"compact",currency:t,value:n})})}),(0,a.jsx)(l.u.Content,{children:(0,r.ed)({currency:t,value:n})})]})}},56800:function(e,t,n){n.d(t,{O:function(){return p},Z:function(){return x}});var a=n(51685),l=n(23808),r=n(55826),i=n(94216),s=n(12353),o=n(85404),d=n(36902);let u=e=>({combinedStatuses:e.combinedStatuses,paymentType:e.paymentType,customerId:e.customerId,currencies:e.currencies,amountMin:e.amountMin,amountMax:e.amountMax,dateFrom:e.dateFrom,gateways:e.gateways,search:e.search,dateTo:e.dateTo}),c=e=>({combinedStatuses:e.combinedStatuses,sortDirection:e.sortDirection,paymentType:e.paymentType,customerId:e.customerId,currencies:e.currencies,amountMin:e.amountMin,amountMax:e.amountMax,dateFrom:e.dateFrom,sortBy:e.sortBy,search:e.search,dateTo:e.dateTo});var h=n(97687);let m=(e,t)=>{var n,a,l,r;let{sortDirection:i,filters:s,sortBy:o,limit:d,page:u}=e,{search:c,period:m,amount:p,...x}=s;return{sortDirection:i,customerId:t,offset:(u-1)*d,sortBy:o,limit:d,...x,...(null==m?void 0:null===(n=m.value)||void 0===n?void 0:n.to)&&{dateTo:(0,h.i)(m.value.to).toISOString()},...(null==m?void 0:null===(a=m.value)||void 0===a?void 0:a.from)&&{dateFrom:m.value.from.toISOString()},...(null==p?void 0:null===(l=p.value)||void 0===l?void 0:l.to)&&{amountMax:p.value.to},...(null==p?void 0:null===(r=p.value)||void 0===r?void 0:r.from)&&{amountMin:p.value.from},...c&&{search:c}}},p="TRANSACTIONS";function x(e){let t=(0,a.xp)(e),n=(0,s.X6)(),[h]=(0,d.S)(),x=m({...t,filters:{...t.filters,showTestData:h}},null==e?void 0:e.customerId),v=u(x),f=c(x),g=(0,o.Z)(()=>i.w.sendTransactionsReportEmail(n,f)),j=(0,l.a)({queryFn:()=>i.w.getTransactions(n,x),queryKey:[n,p,x],select:e=>e.data,enabled:!!n}),y=(0,l.a)({queryFn:async()=>(await i.w.getTransactionsCounters(n,v)).data.data,placeholderData:{refundedCount:0,failedCount:0,totalCount:0,soldCount:0},queryKey:[n,"TRANSACTIONS_COUNTERS",p,v],enabled:!!n}),b=t.getActiveFiltersCount(["results"]);return(0,r.useEffect)(()=>{if(h){var e;t.updateFilter({...t.filters,gateways:null===(e=t.filters.gateways)||void 0===e?void 0:e.filter(e=>"test-processor"!==e),combinedStatuses:void 0})}},[h,t]),{activeFiltersCount:b,resourceReport:g,transactions:j,pagination:t,counters:y}}},46353:function(e,t,n){n.d(t,{Z:function(){return j}});var a=n(70813),l=n(38421),r=n(38220),i=n(75385),s=n(81213),o=n(36902),d=n(38827),u=n(33618),c=n(11661),h=n(27525),m=n(41977);let p=[{label:"Coinbase",value:"coinbase"},{label:"Klarna",value:"klarna"},{label:"NMI",value:"nmi"},{label:"Payments AI",value:"default"},{label:"PayPal",value:"paypal"},{label:"Stripe",value:"stripe"},{value:"test-processor",label:"TestProcessor"},{label:"unassigned",value:"Unassigned"}];var x=n(7004);let v=[{label:"American-Express",value:"American-Express"},{label:"Visa",value:"Visa"},{label:"MasterCard",value:"MasterCard"},{label:"Discover",value:"Discover"},{label:"JCB",value:"JCB"},{label:"Diners-Club",value:"Diners-Club"},{label:"China-UnionPay",value:"China-UnionPay"},{label:"Maestro",value:"Maestro"},{label:"Voyager",value:"Voyager"},{label:"Switch",value:"Switch"},{label:"AstroPay-Card",value:"AstroPay-Card"}],f=[{value:"completed",label:"Completed"},{value:"refunded",label:"Refunded"},{value:"voided",label:"Voided"},{value:"partially-refunded",label:"Partially refunded"},{value:"waiting",label:"Waiting"},{value:"timeout",label:"Timeout"},{value:"not-sent",label:"Not sent"},{value:"disputed",label:"Disputed"},{value:"sending",label:"Sending"},{value:"offsite",label:"Offsite"},{value:"abandoned",label:"Abandoned"},{value:"canceled",label:"Canceled"},{value:"declined",label:"Declined"}];function g(e){let{pagination:t}=e,{data:n}=(0,x.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.SP,{label:(0,a.jsxs)(a.Fragment,{children:["Period",(0,a.jsx)(h.Z,{onClear:()=>t.updateFilter({period:void 0}),value:t.filters.period})]}),id:"period",children:(0,a.jsx)(m.Z,{from:(null==n?void 0:n.createdAt)?new Date(n.createdAt):new Date,onChange:e=>t.updateFilter({period:e}),value:t.filters.period,id:"period"})}),(0,a.jsx)(c.Z,{label:(0,a.jsxs)(a.Fragment,{children:["Amount",(0,a.jsx)(h.Z,{onClear:()=>t.updateFilter({amount:void 0}),value:t.filters.amount})]}),onChange:e=>t.updateFilter({amount:e}),value:t.filters.amount,name:"Amount"}),(0,a.jsx)(r.If,{label:(0,a.jsxs)(a.Fragment,{children:["Currency",(0,a.jsx)(h.Z,{onClear:()=>t.updateFilter({currencies:void 0}),value:t.filters.currencies})]}),onChange:e=>t.updateFilter({currencies:e}),value:t.filters.currencies||[],options:u.kn,placeholder:"All"}),(0,a.jsx)(r.If,{label:(0,a.jsxs)(a.Fragment,{children:["Status",(0,a.jsx)(h.Z,{onClear:()=>t.updateFilter({combinedStatuses:void 0}),value:t.filters.combinedStatuses})]}),onChange:e=>t.updateFilter({combinedStatuses:e}),value:t.filters.combinedStatuses||[],options:f,placeholder:"All"}),(0,a.jsx)(r.If,{label:(0,a.jsxs)(a.Fragment,{children:["Gateway",(0,a.jsx)(h.Z,{onClear:()=>t.updateFilter({gateways:void 0}),value:t.filters.gateways})]}),onChange:e=>t.updateFilter({gateways:e}),value:t.filters.gateways||[],options:p,placeholder:"All"}),(0,a.jsx)(r.If,{label:(0,a.jsxs)(a.Fragment,{children:["Card brand",(0,a.jsx)(h.Z,{onClear:()=>t.updateFilter({paymentInstrumentBrand:void 0}),value:t.filters.paymentInstrumentBrand})]}),onChange:e=>t.updateFilter({paymentInstrumentBrand:e}),value:t.filters.paymentInstrumentBrand||[],options:v,placeholder:"All"})]})}function j(e){var t;let{showTestModeSwitch:n=!0,activeFiltersCount:u,resourceReport:c,transactions:h,pagination:m}=e,[p,x]=(0,o.S)(),{isOpen:v,toggleFilters:f}=(0,i.pW)();return(0,a.jsxs)(s.O.Root,{children:[(0,a.jsxs)(s.O.Header,{children:[(0,a.jsx)(s.O.Search,{onChange:e=>m.updateFilter({search:e}),placeholder:"Search by customer or customer's email address",resetHandler:()=>m.updateFilter({search:""}),value:m.filters.search}),(0,a.jsxs)(r.kC,{alignItems:"center",gridGap:"md",ml:"auto",children:[n&&(0,a.jsx)(r.RQ,{children:(0,a.jsx)(d.Z,{popoverId:"transactions"})}),(0,a.jsx)(s.O.Button,{onClick:f,count:u}),(0,a.jsxs)(r.Lt.Root,{children:[(0,a.jsx)(r.Lt.Trigger,{disabled:c.isPending,asChild:!0,children:(0,a.jsx)(r.op,{"aria-label":"Transactions actions",size:"lg"})}),(0,a.jsxs)(r.Lt.Content,{align:"end",children:[(0,a.jsxs)(r.Lt.Item,{disabled:!(null===(t=h.data)||void 0===t?void 0:t.data.length),onClick:()=>c.mutate({}),children:[(0,a.jsx)(l.Z,{})," Send CSV with selected transactions to mail"]}),n&&(0,a.jsx)(r._e,{children:(0,a.jsx)(r.Lt.CheckboxItem,{onCheckedChange:e=>x(!!e),checked:p,children:"Show test data"})})]})]})]})]}),v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r._e,{children:(0,a.jsx)(r.dy.Root,{onOpenChange:f,open:!0,children:(0,a.jsxs)(r.dy.Content,{children:[(0,a.jsx)(r.dy.Header,{children:(0,a.jsx)(r.dy.Title,{children:"Filters"})}),(0,a.jsx)(r.dy.Section,{children:(0,a.jsx)(r.kC,{flexDirection:"column",children:(0,a.jsx)(g,{pagination:m})})}),u>0&&(0,a.jsx)(r.dy.Action,{children:(0,a.jsx)(r.kC,{justifyContent:"end",py:"xs",children:(0,a.jsx)(s.O.Clear,{clear:m.clearFilters,count:u})})})]})})}),(0,a.jsx)(r.RQ,{children:(0,a.jsx)(r.Uo,{children:(0,a.jsx)(s.O.Content,{children:(0,a.jsxs)(r.kC,{justifyContent:"space-between",gridGap:"md",children:[(0,a.jsx)(s.O.Grid,{children:(0,a.jsx)(g,{pagination:m})}),(0,a.jsx)(s.O.Clear,{clear:m.clearFilters,count:u})]})})})})]})]})}},97491:function(e,t,n){n.d(t,{Z:function(){return F}});var a=n(31791),l=n(70813),r=n(68437),i=n(38220),s=n(33618),o=n(66843),d=n.n(o),u=n(50288),c=n(81363),h=n(75385),m=n(82901),p=n(59193),x=n(93181),v=n(12353),f=n(63224),g=n(36902),j=n(31585),y=n(16614),b=n(31552);let C={[b.m2.ONE_TIME_PAYMENT]:"One time",[b.m2.SUBSCRIPTION_PAYMENT]:"Subscription"};function S(){let e=(0,a._)(["\n  max-width: 10rem;\n"]);return S=function(){return e},e}function w(){let e=(0,a._)(["\n  font-weight: ",";\n"]);return w=function(){return e},e}let I=(0,u.zo)(i.iA.BodyCell)(S()),A=(0,u.zo)(I)(w(),r.Q2.fontWeights.semibold);function P(e){let{transactions:t}=e,n=(0,v.X6)(),[a]=(0,g.S)();return t.isPending?(0,l.jsx)(i.iA.Loading,{columns:7}):t.data.data.map(e=>(0,l.jsx)(d(),{href:{query:{transactionid:e.id,orgId:n,...a&&{[j.l]:"1"}},pathname:"/[orgId]/transactions/[transactionid]"},legacyBehavior:!0,passHref:!0,children:(0,l.jsxs)(i.iA.LinkRow,{children:[(0,l.jsx)(A,{children:(0,s.ed)({currency:e.currency,value:e.amount})}),(0,l.jsx)(I,{children:(0,l.jsx)(y.Z,{status:e.combinedStatus})}),(0,l.jsx)(I,{children:(0,l.jsx)(d(),{href:{query:{customerId:e.customer.id,orgId:n,...a&&{[j.l]:"1"}},pathname:"/[orgId]/customers/[customerId]"},legacyBehavior:!0,passHref:!0,children:(0,l.jsx)(i.ee,{children:e.customer.name||e.customer.email})})}),(0,l.jsx)(I,{children:(0,s.s2)(e.date)}),(0,l.jsx)(I,{children:C[e.paymentType]}),(0,l.jsx)(I,{children:(0,l.jsx)(f.Z,{instrument:e.paymentInstrument})}),(0,l.jsx)(I,{children:x.Z[e.gatewaySlug]})]})},e.id))}function F(e){var t;let{transactions:n,pagination:a,hideFiltersButton:r=!1}=e,[s]=(0,g.S)(),{openFilters:o}=(0,h.pW)(),{isAtMaximumPage:d,adjustedTotalCount:u}=(0,p.V)({totalCount:(null===(t=n.data)||void 0===t?void 0:t.totalCount)||0,pagination:a});return n.isError?(0,l.jsx)(i.Te,{retry:()=>n.refetch(),resource:"transactions"}):n.isSuccess&&0===n.data.data.length?(0,l.jsx)(i.ML,{description:s?"You can add test transactions via test channels outside of Payments AI":"No payment related to Payments AI has been made yet",search:a.filters.search,title:"No payments found"}):(0,l.jsxs)("div",{children:[(0,l.jsxs)(i.kC,{justifyContent:"end",pb:"sm",children:[n.isSuccess&&(0,l.jsx)(i.vI,{totalCount:u,onPageChange:a.updatePage,currentPage:a.page,perPage:a.limit}),n.isPending&&(0,l.jsx)(c.Z,{width:100,height:20.5})]}),(0,l.jsxs)(i.iA.Root,{children:[(0,l.jsx)(i.iA.Header,{children:(0,l.jsxs)(i.iA.HeaderRow,{children:[(0,l.jsx)(i.iA.HeaderCell,{children:"Amount"}),(0,l.jsx)(i.iA.HeaderCell,{children:"Status"}),(0,l.jsx)(i.iA.HeaderCell,{children:"Customer"}),(0,l.jsx)(i.iA.HeaderCell,{...a.getSortingProps("date"),children:"Date"}),(0,l.jsx)(i.iA.HeaderCell,{...a.getSortingProps("paymentType"),children:"Type"}),(0,l.jsx)(i.iA.HeaderCell,{children:"Payment method"}),(0,l.jsx)(i.iA.HeaderCell,{children:"Gateway"})]})}),(0,l.jsx)(i.iA.Body,{children:!d&&(0,l.jsx)(P,{transactions:n,pagination:a})})]}),d&&(0,l.jsx)(m.h,{hideFiltersButton:r,onShowFilters:o}),(0,l.jsxs)(i.kC,{justifyContent:"end",pt:"sm",children:[n.isSuccess&&(0,l.jsx)(i.vI,{totalCount:u,onPageChange:a.updatePage,currentPage:a.page,perPage:a.limit}),n.isPending&&(0,l.jsx)(c.Z,{width:100,height:20.5})]})]})}},84221:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(70813),l=n(38220),r=n(33618),i=n(66843),s=n.n(i),o=n(81363),d=n(75385),u=n(82901),c=n(59193),h=n(12353),m=n(36902),p=n(31585),x=n(16614);function v(e){var t,n;let{transactions:i,pagination:v,hideFiltersButton:f=!1}=e,[g]=(0,m.S)(),j=(0,h.X6)(),{openFilters:y}=(0,d.pW)(),{isAtMaximumPage:b,adjustedTotalCount:C}=(0,c.V)({totalCount:(null===(t=i.data)||void 0===t?void 0:t.totalCount)||0,pagination:v});return i.isPending?Array.from({length:v.limit}).map((e,t)=>(0,a.jsxs)(l.QU,{children:[(0,a.jsx)(o.Z,{width:200}),(0,a.jsx)(l.kC,{justifyContent:"end",children:(0,a.jsx)(o.Z,{width:150})}),(0,a.jsx)(o.Z,{width:150}),(0,a.jsx)(l.kC,{justifyContent:"end",children:(0,a.jsx)(o.Z,{width:150})})]},t)):i.isError?(0,a.jsx)(l.Te,{retry:()=>i.refetch(),resource:"transactions"}):0===i.data.data.length?(0,a.jsx)(l.ML,{description:g?"You can add test transactions via test channels outside of Payments AI":"No payment related to Payments AI has been made yet",search:v.filters.search,title:"No payments found"}):(0,a.jsxs)("div",{children:[(0,a.jsx)(l.kC,{justifyContent:"end",pb:"md",pr:"md",children:(0,a.jsx)(l.vI,{totalCount:C,onPageChange:v.updatePage,currentPage:v.page,perPage:v.limit})}),!b&&(null===(n=i.data)||void 0===n?void 0:n.data.map(e=>(0,a.jsx)(s(),{href:{query:{transactionid:e.id,orgId:j,...g&&{[p.l]:"1"}},pathname:"/[orgId]/transactions/[transactionid]"},style:{display:"contents"},children:(0,a.jsxs)(l.QU,{children:[(0,a.jsx)(l.xv,{color:"pickledBluewood",children:e.customer.name||e.customer.email}),(0,a.jsx)(l.xv,{fontWeight:"semibold",color:"blueRibbon",textAlign:"right",children:(0,r.ed)({currency:e.currency,value:e.amount})}),(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{status:e.combinedStatus})}),(0,a.jsx)(l.xv,{textAlign:"right",color:"waterloo",children:(0,r.s6)(e.date)})]})},e.id))),b&&(0,a.jsx)(u.h,{hideFiltersButton:f,onShowFilters:y}),(0,a.jsx)(l.kC,{justifyContent:"end",pt:"md",pr:"md",children:(0,a.jsx)(l.vI,{totalCount:C,onPageChange:v.updatePage,currentPage:v.page,perPage:v.limit})})]})}},1525:function(e,t,n){var a=n(31791),l=n(70813),r=n(68437),i=n(38220),s=n(88657),o=n(50288),d=n(36902);function u(){let e=(0,a._)(["\n  padding-left: ",";\n  padding-right: ",";\n  @media "," {\n    padding-left: ",";\n    padding-right: ",";\n  }\n"]);return u=function(){return e},e}let c=(0,o.zo)(i.mQ.List)(u(),r.Q2.space["4xl"],r.Q2.space["4xl"],r.Q2.mediaQueries.mobile,r.Q2.space.lg,r.Q2.space.lg),h=[{params:{combinedStatuses:void 0},id:"totalCount",label:"All"},{params:{combinedStatuses:["completed"]},id:"soldCount",label:"Sales"},{params:{combinedStatuses:["refunded","voided","partially-refunded"]},id:"refundedCount",label:"Refunds"},{params:{combinedStatuses:["declined","canceled","abandoned","not-sent"]},id:"failedCount",label:"Failures"}];t.Z=e=>{var t;let{combinedStatuses:n,updateFilter:a,counters:r}=e,[o]=(0,d.S)();return(0,l.jsx)(i.mQ.Root,{value:null===(t=h.find(e=>{let{params:t}=e;return s.a(t.combinedStatuses,n)}))||void 0===t?void 0:t.id,onValueChange:e=>{var t;return a({...null===(t=h.find(t=>{let{id:n}=t;return n===e}))||void 0===t?void 0:t.params})},defaultValue:h[0].id,children:(0,l.jsx)(c,{children:h.map(e=>{var t;let{params:n,label:a,id:s}=e;return(0,l.jsxs)(i.mQ.Trigger,{disabled:(null===(t=n.combinedStatuses)||void 0===t?void 0:t.length)&&o||!1,value:s,children:[a," ",(0,l.jsx)(i.ID,{amount:r?r[s]:0})]},s)})})})}},31733:function(e,t,n){var a=n(55826);let l=a.forwardRef(function({title:e,titleId:t,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",style:{flexShrink:0,display:"inline-block"},stroke:"currentColor","aria-hidden":"true","data-slot":"icon",height:16,width:16,ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("circle",{cx:8,cy:8,r:7.5}),a.createElement("path",{fill:"currentColor",d:"m9.778 11.448-.121.502c-.412.164-1.84.85-2.663.12a1.06 1.06 0 0 1-.368-.829c0-.627.205-1.174.573-2.487.064-.247.144-.57.144-.825 0-.44-.166-.558-.616-.558-.22 0-.462.08-.682.162l.122-.502c.49-.2 1.106-.446 1.633-.446.792 0 1.373.398 1.373 1.155 0 .218-.037.6-.116.864l-.455 1.623c-.093.328-.264 1.05 0 1.265.26.212.874.1 1.176-.044M8.962 5.602A.997.997 0 0 0 9.955 4.6c0-.553-.444-1.001-.993-1.001a.997.997 0 0 0-.992 1c0 .553.444 1.002.992 1.002"}))});t.Z=l}}]);