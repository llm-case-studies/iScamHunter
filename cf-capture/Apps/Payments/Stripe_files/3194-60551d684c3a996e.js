try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="7800e7f4-6146-4d31-b61a-05e0ae10763c",e._sentryDebugIdIdentifier="sentry-dbid-7800e7f4-6146-4d31-b61a-05e0ae10763c")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3194],{80776:function(e,r,n){n.d(r,{AN:function(){return m},IR:function(){return i},Kb:function(){return o},N9:function(){return a},SW:function(){return d},Wh:function(){return t},b5:function(){return c},hh:function(){return s},n3:function(){return p},pW:function(){return u},qV:function(){return h},sU:function(){return l}});let t=/^[a-zA-Z0-9/:.-]+$/,i=/^([a-zA-Z0-9,./])([a-zA-Z0-9, \-()./]*)$/,a=/^[a-zA-ZÀ-ž0-9\/\ '.]+$/,l=/^[a-zA-ZÀ-ž0-9\/\ '.,()#;:'&]+$/,s=/^[A-Za-z0-9\s]*$/g,o=/^[0-9]*$/g,d=/^[\w\d\s\-]+$/,u=/^[A-Z]\d[A-Z] ?\d[A-Z]\d$/,c=/^\d{5}(\d{4})?$/,m=/^[A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}$/,p=RegExp("^[\\w\\s\\-\\p{L},.']+$","u"),h=/^\d{2}\-\d{7}$/},83160:function(e,r,n){n.d(r,{Q:function(){return d}});var t=n(70813),i=n(38220),a=n(55826);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldConfirmLeave:!0},{shouldConfirmLeave:r,beforeUnload:n}=e,t=(0,a.useCallback)(async e=>{n&&await n(),e.preventDefault(),e.returnValue=""},[n]);(0,a.useEffect)(()=>(window&&r&&window.addEventListener("beforeunload",t),()=>{window&&r&&window.removeEventListener("beforeunload",t)}),[t,r])};var s=n(43381),o=e=>{let{shouldConfirmLeave:r}=e,[n,t]=(0,a.useState)(!1),[i,l]=(0,a.useState)(null),o=(0,s.useRouter)(),d=(0,a.useCallback)(e=>{if(r)throw t(!0),l(e),"cancelRouteChange"},[r]),u=()=>{o.events.off("routeChangeStart",d)};return(0,a.useEffect)(()=>(o.events.on("routeChangeStart",d),()=>{o.events.off("routeChangeStart",d)}),[d]),{onConfirmRouteChange:()=>{t(!1),u(),i&&o.push(i)},onRejectRouteChange:()=>{l(null),t(!1)},isRejected:n}};let d=e=>{let{shouldConfirmLeave:r,onDiscard:n,onCancel:s}=e,[d,u]=(0,a.useState)(!1),{onConfirmRouteChange:c,onRejectRouteChange:m,isRejected:p}=o({shouldConfirmLeave:r}),h=(0,a.useCallback)(()=>{n(),c()},[n,c]),g=(0,a.useCallback)(()=>{u(!1),m()},[m]),f=(0,a.useCallback)(()=>{r?u(!0):s?s():n()},[r,s,n]);return l({shouldConfirmLeave:r}),{openUnsavedAlertDialog:f,UnsavedAlert:(0,a.useCallback)(()=>(0,t.jsx)(i.aR.Root,{open:p||d,children:(0,t.jsxs)(i.aR.Content,{children:[(0,t.jsx)(i.aR.Title,{children:"Unsaved changes"}),(0,t.jsx)(i.aR.Description,{children:"Are you sure you want to discard unsaved changes?"}),(0,t.jsxs)(i.aR.Action,{children:[(0,t.jsx)(i.aR.Cancel,{onClick:g,children:"Cancel"}),(0,t.jsx)(i.aR.Submit,{onClick:h,children:"Discard"})]})]})}),[g,h,p,d])}}},2524:function(e,r,n){n.d(r,{Z:function(){return w}});var t=n(70813),i=n(68437),a=n(38220),l=n(31791),s=n(66843),o=n.n(s),d=n(50288),u=n(14755),c=n(87563),m=n(12353);function p(){let e=(0,l._)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  transition: all 300ms;\n\n  width: 2.4rem;\n  height: 2.4rem;\n\n  color: ",";\n\n  border-width: 1px;\n  border-style: solid;\n  border-radius: ",";\n  border-color: ",";\n"]);return p=function(){return e},e}function h(){let e=(0,l._)(["\n  &[data-active] {\n    "," {\n      color: ",";\n      border-color: ",";\n      background-color: ",";\n    }\n  }\n\n  &[data-blocked] {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n"]);return h=function(){return e},e}let g=d.zo.span(p(),i.Q2.colors.waterloo,i.Q2.radii.xs,i.Q2.colors.mystic),f=(0,d.zo)(a.i9.Link)(h(),g,i.Q2.colors.white,i.Q2.colors.blueRibbon,i.Q2.colors.blueRibbon);function x(e){let{links:r}=e,{data:n}=(0,c.Z)(),l=(0,u.Z)(),s=(0,m.X6)();return(0,t.jsx)(a.i9.Root,{orientation:"vertical",children:(0,t.jsx)(a.i9.List,{children:r.map(e=>{let{title:r,href:d,icon:u}=e;return(0,t.jsx)(a.i9.Item,{children:(0,t.jsx)(f,{"data-blocked":"Billing"!==r&&null!=n&&!!n.isBlocked||void 0,active:l(d,!1),asChild:!0,children:(0,t.jsx)(o(),{href:{query:{orgId:s},pathname:d},children:(0,t.jsxs)(a.xu,{display:"grid",alignItems:"center",gridTemplateColumns:"".concat(i.Q2.space.xl," 1fr"),gap:"xs",children:[(0,t.jsx)(g,{children:u}),r]})})},r)},r)})})})}function v(){let e=(0,l._)(["\n  &[data-blocked] {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n"]);return v=function(){return e},e}function y(){let e=(0,l._)(["\n  padding-left: ",";\n  padding-right: ",";\n"]);return y=function(){return e},e}let b=(0,d.zo)(a.i9.Link)(v()),C=(0,d.zo)(a.i9.List)(y(),i.Q2.space.sm,i.Q2.space.sm);function j(e){let{links:r}=e,{data:n}=(0,c.Z)(),i=(0,u.Z)(),l=(0,m.X6)();return(0,t.jsx)(a.i9.Root,{children:(0,t.jsx)(C,{children:r.map(e=>(0,t.jsx)(a.i9.Item,{children:(0,t.jsx)(b,{"data-blocked":"Billing"!==e.title&&null!=n&&!!n.isBlocked||void 0,active:i(e.href),asChild:!0,children:(0,t.jsx)(o(),{href:{query:{orgId:l},pathname:e.href},children:e.title})})},e.href))})})}function w(e){let{children:r,links:n,title:l}=e;return(0,t.jsxs)(a.xu,{display:["block","block","block","grid"],gridTemplateColumns:"22rem 1fr",minHeight:"100%",children:[(0,t.jsx)(a.ZN,{children:(0,t.jsxs)(a.xu,{backgroundColor:"white",pt:"xl",children:[(0,t.jsx)(a.xv,{color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",lineHeight:"small",mb:"xl",px:"sm",children:l}),(0,t.jsx)(j,{links:n})]})}),(0,t.jsx)(a.Nl,{children:(0,t.jsx)(a.xu,{boxShadow:"1px 0px 0px ".concat(i.Q2.colors.mystic,", 0px 1px 0px ").concat(i.Q2.colors.mystic,", 0px 1px 2px rgba(218, 228, 232, 0.5)"),backgroundColor:"athensGray",children:(0,t.jsx)(a.xu,{position:"sticky",top:"0",p:"xl",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(a.xv,{color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",mb:"xl",children:l}),(0,t.jsx)(x,{links:n})]})})})}),(0,t.jsx)(a.kC,{p:["md","md","md","xl"],flexDirection:"column",gridGap:"xl",children:r})]})}},41240:function(e,r,n){n.d(r,{Z:function(){return f}});var t=n(70813),i=n(55826);let a=i.forwardRef(function({title:e,titleId:r,...n},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 13",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:t,"aria-labelledby":r},n),e?i.createElement("title",{id:r},e):null,i.createElement("path",{d:"M5.051.941a3.31 3.31 0 1 0 0 6.62 3.31 3.31 0 0 0 0-6.62m-1.986 3.31a1.986 1.986 0 1 1 3.971-.085 1.986 1.986 0 0 1-3.971.085m6.62 8.607H8.361a3.31 3.31 0 1 0-6.62 0H.416a4.635 4.635 0 0 1 9.268 0"}))});var l=n(94113);let s=i.forwardRef(function({title:e,titleId:r,...n},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:t,"aria-labelledby":r},n),e?i.createElement("title",{id:r},e):null,i.createElement("path",{fillRule:"evenodd",d:"M2.25.796h12v14.321l-2.4-1.6-1.8 1.2-1.8-1.2-1.8 1.2-1.8-1.2-2.4 1.6zm1.2 1.2v10.879l1.2-.8 1.8 1.2 1.8-1.2 1.8 1.2 1.8-1.2 1.2.8V1.995zm4.8 2.4a1.2 1.2 0 1 0 0 2.4 1.2 1.2 0 0 0 0-2.4m-2.4 1.2a2.4 2.4 0 1 1 4.8 0 2.4 2.4 0 0 1-4.8 0m-1.2 3.6h4.2v1.2h-4.2zm5.4 0h1.8v1.2h-1.8z",clipRule:"evenodd"}))});var o=n(59243),d=n(38421),u=n(84435),c=n(37013),m=n(2524);let p=[{href:"/[orgId]/settings/general",icon:(0,t.jsx)(a,{}),title:"General"},{href:"/[orgId]/settings/members",icon:(0,t.jsx)(l.Z,{}),title:"Members"},{href:"/[orgId]/settings/billing",icon:(0,t.jsx)(s,{}),title:"Billing"},{href:"/[orgId]/settings/taxes",icon:(0,t.jsx)(o.Z,{}),title:"Taxes"},{href:"/[orgId]/settings/mails",icon:(0,t.jsx)(d.Z,{}),title:"System mails"}],h={href:"/[orgId]/settings/logs",icon:(0,t.jsx)(u.Z,{}),title:"Logs"},g=()=>{let{hasAccess:e}=(0,c.Z)(["owner"]);return e?[...p,h]:p};function f(e){let{children:r}=e,n=g();return(0,t.jsx)(m.Z,{title:"Organization settings",links:n,children:r})}},42239:function(e,r,n){n.d(r,{T:function(){return h},W:function(){return g}});var t=n(33618),i=n(3997),a=n(53431),l=n(18959),s=n(6491),o=n(80776);let d=i.a(t.Cv,a.a([t.Cv.AU,t.Cv.BR,t.Cv.CA,t.Cv.DE,t.Cv.GB,t.Cv.US]),l.a()),u=s.z.object({address:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(60,(0,t.e$)(t.p8.MostChars,60)).regex(o.sU,t.p8.Address),zip:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(10,(0,t.e$)(t.p8.MostChars,10)).regex(o.SW,t.p8.ZipCode),city:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(50,(0,t.e$)(t.p8.MostChars,50)).regex(o.N9,t.p8.City),country:s.z.enum(d,{required_error:t.p8.Required}),state:s.z.string().nullish()}),c=s.z.object({address:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(40,(0,t.e$)(t.p8.MostChars,40)).regex(o.sU,t.p8.Address),city:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(40,(0,t.e$)(t.p8.MostChars,40)),zip:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).regex(o.b5,t.p8.ZipCodeUS),country:s.z.literal(t.Cv.US,{required_error:t.p8.Required}),state:s.z.nativeEnum(t.JW,{required_error:t.p8.Required})}),m=u.extend({zip:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(7,(0,t.e$)(t.p8.MostChars,7)).regex(o.pW,t.p8.ZipCodeCA),country:s.z.literal(t.Cv.CA,{required_error:t.p8.Required}),state:s.z.nativeEnum(t.gy,{required_error:t.p8.Required})}),p=u.extend({zip:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).regex(o.AN,t.p8.ZipCodeGB),country:s.z.literal(t.Cv.GB,{required_error:t.p8.Required})}),h=[c,m,p,u.extend({country:s.z.literal(t.Cv.BR,{required_error:t.p8.Required}),state:s.z.nativeEnum(t.Fu,{required_error:t.p8.Required})}),u.extend({country:s.z.literal(t.Cv.DE,{required_error:t.p8.Required}),state:s.z.nativeEnum(t.iN,{required_error:t.p8.Required})}),u.extend({zip:s.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(4,(0,t.e$)(t.p8.MostChars,4)),country:s.z.literal(t.Cv.AU,{required_error:t.p8.Required})}),u],g=s.z.discriminatedUnion("country",[...h],{errorMap:e=>{switch(e.code){case"invalid_union_discriminator":case"invalid_type":return{message:t.p8.Required};default:return{message:(null==e?void 0:e.message)||"Validation error"}}}})},8040:function(e,r,n){n.d(r,{W:function(){return s}});var t=n(33618),i=n(17649),a=n(6491),l=n(42239);let s=a.z.object({phoneNumber:a.z.string().refine(e=>!e||(0,i.y)(String(e).trim()),{message:t.p8.Phone}).nullish(),firstName:a.z.string().trim().min(2,(0,t.e$)(t.p8.LeastChars,2)).max(45,(0,t.e$)(t.p8.MostVal,45)),lastName:a.z.string().trim().min(2,(0,t.e$)(t.p8.LeastChars,2)).max(45,(0,t.e$)(t.p8.MostVal,45)),organization:a.z.string().trim().max(255,(0,t.e$)(t.p8.MostChars,255)).nullish(),email:a.z.string().trim().toLowerCase().email(t.p8.Email).nullish(),address:l.W}).superRefine((e,r)=>{let{phoneNumber:n,email:t}=e;t||n||(r.addIssue({message:"Either email or phone number is required",path:["email"],code:"custom"}),r.addIssue({message:"Either email or phone number is required",path:["phoneNumber"],code:"custom"}))})},19061:function(e,r,n){n.d(r,{b:function(){return s},p:function(){return l}});var t=n(70813),i=n(55826);let a=(0,i.createContext)(null);function l(){let e=(0,i.useContext)(a);if(!e)throw Error("useFramepayReadinessContext must be used within a FramepayReadinessProvider");return e}function s(e){let{children:r}=e,[n,l]=(0,i.useState)(!1);return(0,t.jsx)(a.Provider,{value:{isReady:n,setIsReady:l},children:r})}},81721:function(e,r,n){n.d(r,{Z:function(){return q}});var t=n(70813),i=n(18159),a=n(38220),l=n(33618),s=n(15261),o=n(43381),d=n(55826),u=n(44065),c=n(83160),m=n(27897),p=n(12353),h=n(92864),g=n(65324),f=n(8040),x=n(19061);function v(e){var r;let{framepayError:n,CardNumberElement:i,CardExpiryElement:l,CardCvvElement:s}=e,o=(0,d.useRef)(new Set),{setIsReady:u}=(0,x.p)();(0,d.useEffect)(()=>{u(!1)},[u]);let c=(0,d.useCallback)(()=>{o.current.has("cardNumber")&&o.current.has("cardExpiry")&&o.current.has("cardCvv")&&u(!0)},[u]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.DL,{label:"Card Number",children:(0,t.jsx)(i,{onReady:()=>{o.current.add("cardNumber"),c()}})}),(0,t.jsxs)(a.rj,{gridTemplateColumns:"1fr 1fr",gridColumnGap:"md",children:[(0,t.jsx)(a.DL,{label:"Expiration Date",children:(0,t.jsx)(l,{onReady:()=>{o.current.add("cardExpiry"),c()}})}),(0,t.jsx)(a.DL,{label:"CVV",children:(0,t.jsx)(s,{onReady:()=>{o.current.add("cardCvv"),c()}})})]}),null==n?void 0:null===(r=n.details)||void 0===r?void 0:r.map(e=>(0,t.jsx)(a.Uo,{children:(0,t.jsx)(a.fm,{children:e})},e))]})}var y=n(53437),b=n.n(y),C="/_next/static/media/card-validation.bc45068e.png";function j(e){let{threeDsUrl:r}=e,n=(0,a.pm)(),i=(0,d.useCallback)(()=>{try{let e=new URL(r);window.location.href=e.href}catch(e){n({message:"An unexpected error occurred. Please try connecting the payment instrument again.",variant:"error"})}},[r,n]);return(0,t.jsxs)(a.kC,{flexDirection:"column",alignItems:"center",gap:"md",children:[(0,t.jsx)(b(),{src:C,alt:"Card validation illustration",width:216,height:216}),(0,t.jsx)(a.u_.Title,{children:"Bank Confirmation Required"}),(0,t.jsx)(a.u_.Description,{fontSize:"bodySmall",textAlign:"center",pt:"none",children:"Your bank needs you to confirm this transaction. Please open your banking app and approve the payment to continue."}),(0,t.jsx)(a.zx,{variant:"primary",size:"lg",onClick:i,children:"Open banking app"})]})}function w(e){let{closeModal:r}=e;return(0,t.jsxs)(a.kC,{flexDirection:"column",alignItems:"center",gap:"md",children:[(0,t.jsx)(b(),{src:"/_next/static/media/card-validation-failed.5550bf2e.png",alt:"Card validation illustration",width:216,height:216}),(0,t.jsx)(a.u_.Title,{children:"Unable to verify card"}),(0,t.jsx)(a.u_.Description,{fontSize:"bodySmall",textAlign:"center",pt:"none",children:"Please check that your card number, expiry date, and CVV code are correct, then try again."}),(0,t.jsx)(a.u_.Action,{variant:"centered",children:(0,t.jsx)(a.zx,{variant:"primary",size:"lg",onClick:r,children:"Update details"})})]})}function z(){return(0,t.jsxs)(a.kC,{flexDirection:"column",alignItems:"center",gap:"md",children:[(0,t.jsxs)(a.kC,{position:"relative",justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(a.$j,{size:"2xl"}),(0,t.jsx)(a.xu,{position:"absolute",children:(0,t.jsx)(b(),{src:C,alt:"Card validation illustration",width:216,height:216})})]}),(0,t.jsx)(a.u_.Title,{children:"Card validation in Progress"}),(0,t.jsxs)(a.u_.Description,{fontSize:"bodySmall",textAlign:"center",pt:"none",children:["We're checking your card details. This will only take a few seconds -"," ",(0,t.jsx)("strong",{children:"don't close or refresh the page to avoid interruptions."})]})]})}function R(e){let{isOpen:r,onOpenChange:n,variant:i="pending",threeDsUrl:l}=e;return(0,t.jsx)(a.u_.Root,{onOpenChange:n,open:r,preventClose:!0,children:(0,t.jsxs)(a.u_.Content,{size:"sm",preventClose:!0,children:["pending"===i&&(0,t.jsx)(z,{}),"confirm"===i&&(0,t.jsx)(j,{threeDsUrl:l}),"error"===i&&(0,t.jsx)(w,{closeModal:()=>n(!1)})]})})}let k=e=>{var r,n,s,h,x,y,b,C,j,w,z,k;let{useUpdatePaymentMethod:_,instrumentType:q,defaultValues:E,Framepay:N,isUpdateFlow:S,...M}=e,{formState:{isSubmitted:Z,isDirty:A,errors:P},handleSubmit:I,register:U,control:F,watch:D}=(0,u.cI)({resolver:(0,i.F)(f.W),mode:"onTouched",defaultValues:{firstName:(null==E?void 0:E.firstName)||"",lastName:(null==E?void 0:E.lastName)||"",address:{country:(null==E?void 0:null===(r=E.address)||void 0===r?void 0:r.country)||"US"}}}),L=(0,d.useRef)(null),{mutate:$,error:Q,isPending:T}=(0,m.ZP)(N,L),V=D("address.country"),{mutate:B,isPending:O}=_(),W=(0,p.X6)(),G=(0,o.useRouter)(),[H,K]=(0,d.useState)(null),Y=(0,a.pm)(),[X,J]=(0,d.useState)({status:"idle"}),{enable3DsFlow:ee}=(0,g.Vb)(),er=O||T,en=(0,d.useCallback)(()=>{J({status:"idle"}),G.push({pathname:"/[orgId]/settings/billing",query:{orgId:W}})},[W,G]),{UnsavedAlert:et}=(0,c.Q)({shouldConfirmLeave:A&&!(er||Z)&&!H,onDiscard:en}),ei=I(e=>{J({status:"pending"}),$({billingAddress:{phoneNumbers:e.phoneNumber?[{label:e.phoneNumber,value:e.phoneNumber}]:void 0,emails:e.email?[{label:e.email,value:e.email}]:void 0,organization:e.organization||void 0,region:e.address.state||void 0,address:e.address.address,country:e.address.country,postalCode:e.address.zip,firstName:e.firstName,lastName:e.lastName,city:e.address.city},method:"payment-card",used:!0},{onSuccess:e=>{B({token:e.id},{onSuccess:e=>{let{data:r}=e;"redirectUrl"in r.data?K(r.data.redirectUrl):S?Y({message:"Your ".concat(q," payment method has been updated."),variant:"success"}):ee||Y({message:"All set! Your ".concat(q," payment instrument was successfully added."),variant:"success"})},onError:()=>{ee||Y({message:"Failed to ".concat(S?"update":"add"," ").concat(q," payment instrument. Please try again."),variant:"error"})},onSettled:en})}})});return(0,d.useEffect)(()=>{ee&&(H?J({status:"confirm",threeDsUrl:H}):Q&&J({status:"error"}))},[H,Q,ee]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{id:"creditCardInstrumentForm",onSubmit:ei,ref:L,children:[(0,t.jsx)(v,{framepayError:Q,...M}),(0,t.jsx)(a.Z0,{mb:"md"}),(0,t.jsxs)(a.rj,{gridTemplateColumns:"1fr 1fr",gridColumnGap:"md",children:[(0,t.jsx)(a.UP,{...U("firstName"),errorMessage:null===(n=P.firstName)||void 0===n?void 0:n.message,autoComplete:"given-name",placeholder:"First name",label:"First name",id:"firstName"}),(0,t.jsx)(a.UP,{...U("lastName"),errorMessage:null===(s=P.lastName)||void 0===s?void 0:s.message,autoComplete:"family-name",placeholder:"Last name",label:"Last name",id:"lastName"})]}),(0,t.jsx)(a.UP,{...U("organization"),errorMessage:null===(h=P.organization)||void 0===h?void 0:h.message,placeholder:"Organization name",label:"Organization",id:"organization",optional:!0}),(0,t.jsx)(a.UP,{...U("address.address"),errorMessage:null===(y=P.address)||void 0===y?void 0:null===(x=y.address)||void 0===x?void 0:x.message,autoComplete:"street-address",placeholder:"Address",label:"Address"}),(0,t.jsxs)(a.rj,{gridTemplateColumns:"1fr 1fr",gridGap:"sm",children:[(0,t.jsx)(a.UP,{...U("address.city"),errorMessage:null===(C=P.address)||void 0===C?void 0:null===(b=C.city)||void 0===b?void 0:b.message,autoComplete:"address-level2",placeholder:"City",label:"City"}),(0,t.jsx)(a.UP,{...U("address.zip"),errorMessage:null===(w=P.address)||void 0===w?void 0:null===(j=w.zip)||void 0===j?void 0:j.message,autoComplete:"postal-code",placeholder:"Postal/ZIP",label:"Postal/ZIP"})]}),(0,t.jsxs)(a.rj,{gridTemplateColumns:(0,l.fj)(V)?"1fr 1fr":"1fr",gridGap:"sm",children:[(0,t.jsx)(u.Qr,{render:e=>{var r,n;let{field:i}=e;return(0,t.jsx)(a.aL,{errorMessage:null==P?void 0:null===(n=P.address)||void 0===n?void 0:null===(r=n.country)||void 0===r?void 0:r.message,onChange:i.onChange,value:i.value,label:"Country",id:i.name})},name:"address.country",control:F}),(0,l.fj)(V)&&(0,t.jsx)(u.Qr,{render:e=>{var r,n;let{field:i}=e;return(0,t.jsx)(a.mg,{errorMessage:null===(n=P.address)||void 0===n?void 0:null===(r=n.state)||void 0===r?void 0:r.message,options:l.sD[V],value:i.value||void 0,onValueChange:i.onChange,placeholder:"Select state",id:i.name,label:"State"})},name:"address.state",control:F})]}),(0,t.jsx)(a.D,{errorMessage:null===(z=P.phoneNumber)||void 0===z?void 0:z.message,placeholder:"Phone number",label:"Phone number",autoComplete:"tel",name:"phoneNumber",control:F}),(0,t.jsx)(a.UP,{...U("email"),errorMessage:null===(k=P.email)||void 0===k?void 0:k.message,placeholder:"Email address",label:"Email address",autoComplete:"email",id:"email"}),(0,t.jsxs)(a.kC,{justifyContent:"flex-end",alignItems:"center",gridGap:"md",children:[(0,t.jsx)(a.zx,{disabled:er,variant:"secondary",onClick:en,type:"button",size:"lg",children:"Cancel"}),(0,t.jsx)(a.zx,{$loading:er,variant:"primary",type:"submit",size:"lg",children:"Save"})]})]}),(0,t.jsx)(et,{}),(0,t.jsx)(R,{isOpen:"idle"!==X.status,onOpenChange:e=>{e||J({status:"idle"})},threeDsUrl:H,variant:X.status})]})},_=(0,s.withFramePayCardComponent)(e=>{let{usePaymentMethod:r,instrumentType:n,Framepay:i,...l}=e,{data:s,isPending:o,refetch:d,isError:u}=r();return!i.ready||o?(0,t.jsx)(a.Ib,{loading:!0}):u?(0,t.jsx)(a.Te,{resource:"payment method",retry:()=>d()}):(0,t.jsx)(k,{defaultValues:{...null==s?void 0:s.billingAddress,address:{...null==s?void 0:s.billingAddress}},instrumentType:n,Framepay:i,isUpdateFlow:!!s,...l})});function q(e){let{instrumentType:r,useUpdatePaymentMethod:n=h.me,usePaymentMethod:i=h.QN}=e;return(0,t.jsx)(_,{instrumentType:r,useUpdatePaymentMethod:n,usePaymentMethod:i})}},27334:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(70813),i=n(68437),a=n(38220),l=n(15261),s=n(59784),o=n(26360);let d=e=>{let{publishableKey:r,children:n}=e;return(0,t.jsx)(l.FramePayProvider,{style:{buttons:{base:{":hover":{background:"linear-gradient(0deg,rgba(6,112,247,0.05),rgba(6,112,247,0.05)) #FFFFFF"},borderColor:i.Q2.colors.mystic,fontFamily:i.Q2.fonts.heading,background:i.Q2.colors.white,color:i.Q2.colors.fiord},active:{background:i.Q2.colors.blueRibbon,color:i.Q2.colors.white}}},publishableKey:r,locale:"en-US",children:n})};function u(e){let{publishableKey:r=o.O.NEXT_PUBLIC_FRAMEPAY_KEY,children:n}=e;return(0,t.jsx)(s.SV,{fallback:e=>{let{resetError:r}=e;return(0,t.jsx)(a.Te,{resource:"services",retry:r})},children:(0,t.jsx)(d,{publishableKey:r,children:n},r)})}},46847:function(e,r,n){n.d(r,{Z:function(){return t.Z}});var t=n(27334)},27897:function(e,r,n){n.d(r,{ZP:function(){return i}});var t=n(93963);function i(e,r){return(0,t.D)({mutationFn:n=>e.createToken(r.current,n)})}},92864:function(e,r,n){n.d(r,{QN:function(){return c},me:function(){return m}});var t=n(31552),i=n(23808),a=n(68863),l=n(93963),s=n(94216),o=n(7004),d=n(12353);let u="PRIMARY_PAYMENT_INSTRUMENT",c=()=>{let e=(0,d.X6)();return(0,i.a)({queryFn:async()=>{try{return await s.w.getPrimaryPaymentInstrument(e)}catch(e){if(e instanceof t.MS&&(null==e?void 0:e.code)==="OrganizationPaymentInstrumentNotFound")return null;throw e}},queryKey:[e,u],select:e=>(null==e?void 0:e.data.data)||null,enabled:!!e})},m=()=>{let e=(0,d.X6)(),r=(0,a.NL)();return(0,l.D)({mutationFn:r=>s.w.updatePrimaryPaymentInstrument(e,r),onSuccess:()=>{r.invalidateQueries({queryKey:[e,o.N]}),r.invalidateQueries({queryKey:[e,u]})}})}},76968:function(e,r,n){var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 22 22",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{stroke:"url(#paint0_linear_6905_1323)",strokeLinecap:"square",strokeMiterlimit:10,strokeWidth:1.5,d:"M3.25 16.5833V11.25M8.58333 16.5833V11.25M13.9167 16.5833V11.25M19.25 16.5833V11.25M11.25 1.25L1.25 6.58333V9.25H21.25V6.58333L11.25 1.25ZM12.5833 5.91667C12.5833 6.65305 11.9864 7.25 11.25 7.25C10.5136 7.25 9.91667 6.65305 9.91667 5.91667C9.91667 5.18029 10.5136 4.58333 11.25 4.58333C11.9864 4.58333 12.5833 5.18029 12.5833 5.91667ZM1.25 18.5833H21.25V21.25H1.25V18.5833Z"}),t.createElement("defs",null,t.createElement("linearGradient",{id:"paint0_linear_6905_1323",x1:14.9086,x2:9.33517,y1:1.25,y2:22.2204,gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#062DF7"}),t.createElement("stop",{offset:1,stopColor:"#06BDF7"}))))});r.Z=i},38421:function(e,r,n){var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{d:"M15.75 3.5c0-.825-.675-1.5-1.5-1.5h-12c-.825 0-1.5.675-1.5 1.5v9c0 .825.675 1.5 1.5 1.5h12c.825 0 1.5-.675 1.5-1.5zm-1.5 0-6 3.75-6-3.75zm0 9h-12V5l6 3.75 6-3.75z"}))});r.Z=i},59243:function(e,r,n){var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{fillRule:"evenodd",d:"M13.55.985a.65.65 0 0 1 .12.912l-10 13a.65.65 0 1 1-1.03-.793l10-13a.65.65 0 0 1 .91-.119M4.655 2.151a1.85 1.85 0 1 0 0 3.7 1.85 1.85 0 0 0 0-3.7M1.504 4a3.15 3.15 0 1 1 6.3 0 3.15 3.15 0 0 1-6.3 0m8.3 8a1.85 1.85 0 1 1 3.7 0 1.85 1.85 0 0 1-3.7 0m1.85-3.15a3.15 3.15 0 1 0 0 6.3 3.15 3.15 0 0 0 0-6.3",clipRule:"evenodd"}))});r.Z=i}}]);