try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8bea5d31-484d-4f85-aec6-75ca6426842c",e._sentryDebugIdIdentifier="sentry-dbid-8bea5d31-484d-4f85-aec6-75ca6426842c")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2756],{33721:function(e,n,t){t.d(n,{Z:function(){return a}});var i=t(43381),l=t(55826);function a(e,n){let t=(0,i.useRouter)();return(0,l.useEffect)(()=>{t.isReady&&e&&(n?t.replace(n):t.back())},[e,n,t]),{redirected:e}}},83160:function(e,n,t){t.d(n,{Q:function(){return d}});var i=t(70813),l=t(38220),a=t(55826);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldConfirmLeave:!0},{shouldConfirmLeave:n,beforeUnload:t}=e,i=(0,a.useCallback)(async e=>{t&&await t(),e.preventDefault(),e.returnValue=""},[t]);(0,a.useEffect)(()=>(window&&n&&window.addEventListener("beforeunload",i),()=>{window&&n&&window.removeEventListener("beforeunload",i)}),[i,n])};var s=t(43381),r=e=>{let{shouldConfirmLeave:n}=e,[t,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),r=(0,s.useRouter)(),d=(0,a.useCallback)(e=>{if(n)throw i(!0),o(e),"cancelRouteChange"},[n]),u=()=>{r.events.off("routeChangeStart",d)};return(0,a.useEffect)(()=>(r.events.on("routeChangeStart",d),()=>{r.events.off("routeChangeStart",d)}),[d]),{onConfirmRouteChange:()=>{i(!1),u(),l&&r.push(l)},onRejectRouteChange:()=>{o(null),i(!1)},isRejected:t}};let d=e=>{let{shouldConfirmLeave:n,onDiscard:t,onCancel:s}=e,[d,u]=(0,a.useState)(!1),{onConfirmRouteChange:c,onRejectRouteChange:m,isRejected:h}=r({shouldConfirmLeave:n}),y=(0,a.useCallback)(()=>{t(),c()},[t,c]),p=(0,a.useCallback)(()=>{u(!1),m()},[m]),x=(0,a.useCallback)(()=>{n?u(!0):s?s():t()},[n,s,t]);return o({shouldConfirmLeave:n}),{openUnsavedAlertDialog:x,UnsavedAlert:(0,a.useCallback)(()=>(0,i.jsx)(l.aR.Root,{open:h||d,children:(0,i.jsxs)(l.aR.Content,{children:[(0,i.jsx)(l.aR.Title,{children:"Unsaved changes"}),(0,i.jsx)(l.aR.Description,{children:"Are you sure you want to discard unsaved changes?"}),(0,i.jsxs)(l.aR.Action,{children:[(0,i.jsx)(l.aR.Cancel,{onClick:p,children:"Cancel"}),(0,i.jsx)(l.aR.Submit,{onClick:y,children:"Discard"})]})]})}),[p,y,h,d])}}},16053:function(e,n,t){t.d(n,{Z:function(){return c}});var i=t(68863),l=t(37742),a=t(93963),o=t(94216),s=t(12353),r=t(61833),d=t(74115),u=t(93499);function c(e){let n=(0,i.NL)(),t=(0,s.X6)(),c=(0,l.B)({mutationKey:[t,"UPDATE_GATEWAY"]}),m=(0,a.D)({mutationFn:n=>o.w.updateGateway(t,e,n),onSuccess:i=>{n.setQueryData([t,d.S,e],i),n.invalidateQueries({queryKey:[t,r.vM]}),n.invalidateQueries({queryKey:[t,u.q,e]})}});return{...m,isPending:m.isPending||!!c}}},93499:function(e,n,t){t.d(n,{Z:function(){return u},q:function(){return d}});var i=t(68863),l=t(23808),a=t(93963),o=t(55826),s=t(94216),r=t(12353);let d="VOLUME_LIMITS";function u(e){let[n,t]=(0,o.useState)([]),u=(0,r.X6)(),c=(0,i.NL)(),m=null==e?void 0:e.gateway.slug,h="default"!==m,y=[u,d,m],{isPending:p,data:x}=(0,l.a)({enabled:!!u&&(null==e?void 0:e.isEnabled)&&void 0!==m&&"default"!==m,queryFn:()=>s.w.getGatewayLimits(u,m),select:e=>e.data.data,queryKey:y}),f=(0,a.D)({mutationFn:e=>Promise.all(e.map(e=>s.w.updateMethodLimits(u,m,e))),onSuccess:e=>c.setQueryData(y,e.pop())}),g=(null==x?void 0:x.some(e=>Object.entries(e).some(e=>{let[n,t]=e;return"paymentMethod"!==n&&"string"!=typeof t&&null!==t.limit})))||!1,v=async e=>(await s.w.getGatewayLimits(u,e)).data.data.some(e=>Object.entries(e).some(e=>{let[n,t]=e;return"paymentMethod"!==n&&"string"!=typeof t&&null!==t.limit})),b=(0,o.useCallback)(()=>{x&&t(x.map(e=>{var n,t,i,l,a,o,s,r;return{monthlyAmount:{limit:(null===(t=e.monthlyAmount)||void 0===t?void 0:null===(n=t.limit)||void 0===n?void 0:n.toString())||""},monthlyValue:{limit:(null===(l=e.monthlyValue)||void 0===l?void 0:null===(i=l.limit)||void 0===i?void 0:i.toString())||""},dailyAmount:{limit:(null===(o=e.dailyAmount)||void 0===o?void 0:null===(a=o.limit)||void 0===a?void 0:a.toString())||""},dailyValue:{limit:(null===(r=e.dailyValue)||void 0===r?void 0:null===(s=r.limit)||void 0===s?void 0:s.toString())||""},paymentMethod:e.paymentMethod}}))},[x]);return(0,o.useEffect)(()=>{b()},[b]),{getGatewayLimitsStatusByGatewaySlug:v,isUpdating:f.isPending,isVolumeLimitsAvailable:h,resetLimitsToUpdate:b,updateGatewayLimits:e=>{let t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return""===e?null:Number.parseInt(e,n)};return f.mutateAsync(n.map(e=>({...e,monthlyAmount:{limit:t(e.monthlyAmount.limit)},monthlyValue:{limit:t(e.monthlyValue.limit)},dailyAmount:{limit:t(e.dailyAmount.limit)},dailyValue:{limit:t(e.dailyValue.limit)}})),e)},isAnyLimitEnabled:g,setLimitToUpdate:(e,n)=>{if(!/^[0-9]*$/g.test(n))return;let i=e.split("-"),l=i.pop(),a=null==i?void 0:i.join("-");t(e=>e.map(e=>e.paymentMethod!==a?e:{...e,[l]:{limit:n}}))},limitsToUpdate:n,limits:x,resetLimits:e=>{let t=n.map(e=>({paymentMethod:e.paymentMethod,monthlyAmount:{limit:null},monthlyValue:{limit:null},dailyAmount:{limit:null},dailyValue:{limit:null}}));return f.mutateAsync(t,e)},isPending:p}}},85493:function(e,n,t){t.d(n,{Z:function(){return _}});var i=t(31791),l=t(70813),a=t(68437),o=t(38220),s=t(50288),r=t(33618),d=t(93181),u=t(37013),c=t(16053),m=t(59695),h=t(68894),y=t(64774);function p(){let e=(0,i._)([""]);return p=function(){return e},e}let x=(0,s.zo)(o.xu).attrs({px:{desktop:"2xl",mobile:"md"},py:{desktop:"xl",mobile:"md"}})(p());function f(e){let{showEnableSwitch:n=!0,singleGateway:t}=e,{hasAccess:i}=(0,u.Z)(),a=(0,o.pm)(),{gateway:{slug:s},createdAt:p,updatedAt:f,status:g}=t,{mutate:v,isPending:b}=(0,c.Z)(s);return(0,l.jsxs)(o.xu,{boxShadow:"0px 4px 16px -4px rgba(218, 228, 232, 0.75)",backgroundColor:"white",borderRadius:"xs",children:[(0,l.jsx)(x,{children:(0,l.jsx)(h.Z,{slug:s})}),(0,l.jsx)(o.Z0,{}),n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x,{children:(0,l.jsx)(o.KV,{disabled:b||!i,checked:t.isEnabled,label:"Gateway Account Enabled",onCheckedChange:e=>{v({isEnabled:e},{onSuccess:()=>{a({message:"Gateway ".concat(d.Z[s]," is now ").concat(e?"enabled":"disabled"),variant:"success"})}})},id:s})}),(0,l.jsx)(o.Z0,{})]}),(0,l.jsx)(x,{children:(0,l.jsxs)(o.kC,{flexDirection:"column",gridGap:"lg",children:[(0,l.jsx)(y.Z,{status:g}),(0,l.jsx)(m.Z,{slug:s}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.xv,{color:"waterloo",fontSize:"small",mb:"xs",children:"Created on"}),(0,l.jsx)(o.xv,{children:p&&(0,r.s6)(p)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.xv,{color:"waterloo",fontSize:"small",mb:"xs",children:"Last update"}),(0,l.jsx)(o.xv,{children:f&&(0,r.s6)(f)})]})]})})]})}var g=t(66843),v=t.n(g),b=t(12353),w=e=>{let{slug:n}=e,t=(0,b.X6)();return(0,l.jsxs)(o.Oo.Root,{children:[(0,l.jsx)(o.Oo.Item,{children:(0,l.jsx)(v(),{href:{query:{orgId:t},pathname:"/[orgId]/gateways"},legacyBehavior:!0,passHref:!0,children:(0,l.jsx)(o.Oo.Previous,{children:"Gateways"})})}),(0,l.jsx)(o.Oo.Item,{children:(0,l.jsxs)(o.Oo.Current,{children:[d.Z[n]," Gateway Settings"]})})]})},j=e=>{let{name:n}=e;return(0,l.jsx)(o.RQ,{children:(0,l.jsxs)(o.xv,{textTransform:"capitalize",color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",fontSize:"h3",children:[d.Z[n]," Gateway Settings"]})})};function k(){let e=(0,i._)(["\n  user-select: none;\n  opacity: 0.5;\n  > * {\n    pointer-events: none;   \n  }\n"]);return k=function(){return e},e}function C(){let e=(0,i._)(["\n  padding: ",";\n  transition: opacity 500ms ease;\n\n  ","\n\n  @media "," {\n    padding: "," ",";\n  }\n\n  @media "," {\n    padding: 0;\n  }\n"]);return C=function(){return e},e}let Q=(0,s.iv)(k()),S=s.zo.div(C(),a.Q2.space.xl,e=>{let{enabled:n}=e;return!n&&Q},a.Q2.mediaQueries.desktopL,a.Q2.space.xl,a.Q2.space["3xl"],a.Q2.mediaQueries.mobile);var Z=e=>{let{children:n,enabled:t,...i}=e,a=(0,o.pm)();return(0,l.jsx)(S,{onClick:t?()=>void 0:()=>a({message:"This gateway is currently disabled. If you want to make any changes, you must first enable it from the left sidebar.",title:"Enable gateway to make changes",variant:"warning"}),enabled:t,...i,children:n})};function E(){let e=(0,i._)(["\n  display: grid;\n  grid-template-columns: 32rem 1fr;\n  position: relative;\n  height: 100%;\n\n  @media "," {\n    grid-template-columns: 1fr;\n  }\n\n  @media "," {\n    grid-template-columns: 44rem 1fr;\n  }\n"]);return E=function(){return e},e}function A(){let e=(0,i._)(["\n  padding: 0 1rem 1rem 1rem;\n  box-shadow:\n    1px 0px 0px ",",\n    0px 1px 0px ",",\n    0px 1px 2px rgba(218, 228, 232, 0.5);\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return A=function(){return e},e}function R(){let e=(0,i._)(["\n  padding-top: 1rem;\n  position: sticky;\n  top: 0;\n  width: 100%;\n  max-width: 35rem;\n\n  @media "," {\n    max-width: unset;\n    padding: 0;\n  }\n"]);return R=function(){return e},e}let G=s.zo.div(E(),a.Q2.mediaQueries.mobile,a.Q2.mediaQueries.desktopL),L=s.zo.div(A(),a.Q2.colors.mystic,a.Q2.colors.mystic,a.Q2.colors.athensGray),D=s.zo.div(R(),a.Q2.mediaQueries.mobile);function _(e){let{leftColumnContent:n=null,showEnableSwitch:t=!0,children:i,gateway:a}=e;return(0,l.jsxs)(G,{children:[(0,l.jsx)(L,{children:(0,l.jsxs)(D,{children:[(0,l.jsx)(o.xu,{pt:{desktop:"xxs",mobile:"sm"},children:(0,l.jsx)(w,{slug:a.gateway.slug})}),(0,l.jsx)(o.xu,{pt:"md",children:(0,l.jsx)(f,{showEnableSwitch:t,singleGateway:a})}),n&&(0,l.jsx)(o.xu,{pb:{desktop:"none",mobile:"lg"},pt:"xl",children:n})]})}),(0,l.jsx)(Z,{enabled:!!a.gateway.isDefault||a.isEnabled,children:(0,l.jsxs)(o.kC,{p:{desktop:"none",mobile:"md"},flexDirection:"column",gridGap:"xl",children:[(0,l.jsx)(j,{name:a.gateway.slug}),i]})})]})}},18208:function(e,n,t){t.d(n,{Z:function(){return r}});var i=t(70813),l=t(38220),a=t(93181),o=t(37013),s=t(16053);function r(e){let{gateway:n}=e,{hasAccess:t}=(0,o.Z)(),r=(0,l.pm)(),d=n.gateway.slug,{mutate:u,isPending:c}=(0,s.Z)(d);return(0,i.jsxs)(l.QQ.Root,{children:[(0,i.jsx)(l.QQ.Header,{children:(0,i.jsxs)("div",{children:[(0,i.jsx)(l.QQ.Title,{children:"Sticky Gateway"}),(0,i.jsx)(l.QQ.Description,{children:'Your customer\'s payment instrument will "stick" to this gateway account. Every further transaction will be proceeded using this gateway when enabled.'})]})}),(0,i.jsx)(l.xu,{pt:"xl",children:(0,i.jsx)(l.Zb,{children:(0,i.jsx)(l.KV,{disabled:!t||c,onCheckedChange:e=>{u({isSticky:e},{onSuccess:()=>{r({message:"Sticky Gateway ".concat(e?"enabled":"disabled"," for gateway ").concat(a.Z[d]),variant:"success"})}})},checked:n.isSticky,label:"Sticky Gateway"})})})]})}},75251:function(e,n,t){t.d(n,{Z:function(){return s}});var i=t(55826),l=t(33721),a=t(12353),o=t(15446);function s(e,n){let t=(0,a.X6)(),s=(0,i.useMemo)(()=>!n&&(0,o.Z)(e),[n,e]);(0,l.Z)(s,{pathname:"/[orgId]/gateways",query:{orgId:t}})}}}]);