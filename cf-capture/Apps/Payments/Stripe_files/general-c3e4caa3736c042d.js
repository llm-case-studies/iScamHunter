try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="a66a0544-41f0-4ae6-b4e5-908bf5472272",e._sentryDebugIdIdentifier="sentry-dbid-a66a0544-41f0-4ae6-b4e5-908bf5472272")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2150],{18278:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[orgId]/settings/general",function(){return n(66968)}])},1222:function(e,r,n){"use strict";var t=n(31791),i=n(70813),s=n(31733),o=n(68437),l=n(50288);function a(){let e=(0,t._)(["\n  transition: all 300ms;\n  cursor: pointer;\n  opacity: 0.4;\n  color: ",";\n\n  &:hover {\n    color: ",";\n    opacity: 1;\n  }\n"]);return a=function(){return e},e}function d(){let e=(0,t._)(["\n  all: unset;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  border-radius: ",";\n  &:focus-visible {\n    outline: -webkit-focus-ring-color auto thin;\n    outline: revert;\n  }\n"]);return d=function(){return e},e}let c=(0,l.zo)(s.Z)(a(),o.Q2.colors.dustGray,o.Q2.colors.blueRibbon),u=l.zo.button.attrs({type:"button"})(d(),o.Q2.radii.full);r.Z=e=>(0,i.jsx)(u,{...e,children:(0,i.jsx)(c,{})})},80776:function(e,r,n){"use strict";n.d(r,{AN:function(){return h},IR:function(){return i},Kb:function(){return a},N9:function(){return s},SW:function(){return d},Wh:function(){return t},b5:function(){return u},hh:function(){return l},n3:function(){return m},pW:function(){return c},qV:function(){return v},sU:function(){return o}});let t=/^[a-zA-Z0-9/:.-]+$/,i=/^([a-zA-Z0-9,./])([a-zA-Z0-9, \-()./]*)$/,s=/^[a-zA-ZÀ-ž0-9\/\ '.]+$/,o=/^[a-zA-ZÀ-ž0-9\/\ '.,()#;:'&]+$/,l=/^[A-Za-z0-9\s]*$/g,a=/^[0-9]*$/g,d=/^[\w\d\s\-]+$/,c=/^[A-Z]\d[A-Z] ?\d[A-Z]\d$/,u=/^\d{5}(\d{4})?$/,h=/^[A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}$/,m=RegExp("^[\\w\\s\\-\\p{L},.']+$","u"),v=/^\d{2}\-\d{7}$/},47541:function(e,r,n){"use strict";n.d(r,{Z:function(){return o}});var t=n(38220),i=n(33618),s=n(55826);function o(){let{errorMessage:e,message:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.pm)();return(0,s.useCallback)(async t=>{try{await navigator.clipboard.writeText(t),n({message:r||"Successfully copied.",variant:"success"})}catch(r){if(r instanceof DOMException&&"NotAllowedError"===r.name){n({message:"Clipboard access denied. Please copy manually.",variant:"error"});return}n({message:e||(0,i.T)(r)||"Couldn't copy to clipboard.",variant:"error"})}},[e,r,n])}},83160:function(e,r,n){"use strict";n.d(r,{Q:function(){return d}});var t=n(70813),i=n(38220),s=n(55826);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldConfirmLeave:!0},{shouldConfirmLeave:r,beforeUnload:n}=e,t=(0,s.useCallback)(async e=>{n&&await n(),e.preventDefault(),e.returnValue=""},[n]);(0,s.useEffect)(()=>(window&&r&&window.addEventListener("beforeunload",t),()=>{window&&r&&window.removeEventListener("beforeunload",t)}),[t,r])};var l=n(43381),a=e=>{let{shouldConfirmLeave:r}=e,[n,t]=(0,s.useState)(!1),[i,o]=(0,s.useState)(null),a=(0,l.useRouter)(),d=(0,s.useCallback)(e=>{if(r)throw t(!0),o(e),"cancelRouteChange"},[r]),c=()=>{a.events.off("routeChangeStart",d)};return(0,s.useEffect)(()=>(a.events.on("routeChangeStart",d),()=>{a.events.off("routeChangeStart",d)}),[d]),{onConfirmRouteChange:()=>{t(!1),c(),i&&a.push(i)},onRejectRouteChange:()=>{o(null),t(!1)},isRejected:n}};let d=e=>{let{shouldConfirmLeave:r,onDiscard:n,onCancel:l}=e,[d,c]=(0,s.useState)(!1),{onConfirmRouteChange:u,onRejectRouteChange:h,isRejected:m}=a({shouldConfirmLeave:r}),v=(0,s.useCallback)(()=>{n(),u()},[n,u]),x=(0,s.useCallback)(()=>{c(!1),h()},[h]),p=(0,s.useCallback)(()=>{r?c(!0):l?l():n()},[r,l,n]);return o({shouldConfirmLeave:r}),{openUnsavedAlertDialog:p,UnsavedAlert:(0,s.useCallback)(()=>(0,t.jsx)(i.aR.Root,{open:m||d,children:(0,t.jsxs)(i.aR.Content,{children:[(0,t.jsx)(i.aR.Title,{children:"Unsaved changes"}),(0,t.jsx)(i.aR.Description,{children:"Are you sure you want to discard unsaved changes?"}),(0,t.jsxs)(i.aR.Action,{children:[(0,t.jsx)(i.aR.Cancel,{onClick:x,children:"Cancel"}),(0,t.jsx)(i.aR.Submit,{onClick:v,children:"Discard"})]})]})}),[x,v,m,d])}}},2524:function(e,r,n){"use strict";n.d(r,{Z:function(){return C}});var t=n(70813),i=n(68437),s=n(38220),o=n(31791),l=n(66843),a=n.n(l),d=n(50288),c=n(14755),u=n(87563),h=n(12353);function m(){let e=(0,o._)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  transition: all 300ms;\n\n  width: 2.4rem;\n  height: 2.4rem;\n\n  color: ",";\n\n  border-width: 1px;\n  border-style: solid;\n  border-radius: ",";\n  border-color: ",";\n"]);return m=function(){return e},e}function v(){let e=(0,o._)(["\n  &[data-active] {\n    "," {\n      color: ",";\n      border-color: ",";\n      background-color: ",";\n    }\n  }\n\n  &[data-blocked] {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n"]);return v=function(){return e},e}let x=d.zo.span(m(),i.Q2.colors.waterloo,i.Q2.radii.xs,i.Q2.colors.mystic),p=(0,d.zo)(s.i9.Link)(v(),x,i.Q2.colors.white,i.Q2.colors.blueRibbon,i.Q2.colors.blueRibbon);function f(e){let{links:r}=e,{data:n}=(0,u.Z)(),o=(0,c.Z)(),l=(0,h.X6)();return(0,t.jsx)(s.i9.Root,{orientation:"vertical",children:(0,t.jsx)(s.i9.List,{children:r.map(e=>{let{title:r,href:d,icon:c}=e;return(0,t.jsx)(s.i9.Item,{children:(0,t.jsx)(p,{"data-blocked":"Billing"!==r&&null!=n&&!!n.isBlocked||void 0,active:o(d,!1),asChild:!0,children:(0,t.jsx)(a(),{href:{query:{orgId:l},pathname:d},children:(0,t.jsxs)(s.xu,{display:"grid",alignItems:"center",gridTemplateColumns:"".concat(i.Q2.space.xl," 1fr"),gap:"xs",children:[(0,t.jsx)(x,{children:c}),r]})})},r)},r)})})})}function b(){let e=(0,o._)(["\n  &[data-blocked] {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n"]);return b=function(){return e},e}function g(){let e=(0,o._)(["\n  padding-left: ",";\n  padding-right: ",";\n"]);return g=function(){return e},e}let j=(0,d.zo)(s.i9.Link)(b()),y=(0,d.zo)(s.i9.List)(g(),i.Q2.space.sm,i.Q2.space.sm);function w(e){let{links:r}=e,{data:n}=(0,u.Z)(),i=(0,c.Z)(),o=(0,h.X6)();return(0,t.jsx)(s.i9.Root,{children:(0,t.jsx)(y,{children:r.map(e=>(0,t.jsx)(s.i9.Item,{children:(0,t.jsx)(j,{"data-blocked":"Billing"!==e.title&&null!=n&&!!n.isBlocked||void 0,active:i(e.href),asChild:!0,children:(0,t.jsx)(a(),{href:{query:{orgId:o},pathname:e.href},children:e.title})})},e.href))})})}function C(e){let{children:r,links:n,title:o}=e;return(0,t.jsxs)(s.xu,{display:["block","block","block","grid"],gridTemplateColumns:"22rem 1fr",minHeight:"100%",children:[(0,t.jsx)(s.ZN,{children:(0,t.jsxs)(s.xu,{backgroundColor:"white",pt:"xl",children:[(0,t.jsx)(s.xv,{color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",lineHeight:"small",mb:"xl",px:"sm",children:o}),(0,t.jsx)(w,{links:n})]})}),(0,t.jsx)(s.Nl,{children:(0,t.jsx)(s.xu,{boxShadow:"1px 0px 0px ".concat(i.Q2.colors.mystic,", 0px 1px 0px ").concat(i.Q2.colors.mystic,", 0px 1px 2px rgba(218, 228, 232, 0.5)"),backgroundColor:"athensGray",children:(0,t.jsx)(s.xu,{position:"sticky",top:"0",p:"xl",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(s.xv,{color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",mb:"xl",children:o}),(0,t.jsx)(f,{links:n})]})})})}),(0,t.jsx)(s.kC,{p:["md","md","md","xl"],flexDirection:"column",gridGap:"xl",children:r})]})}},41240:function(e,r,n){"use strict";n.d(r,{Z:function(){return p}});var t=n(70813),i=n(55826);let s=i.forwardRef(function({title:e,titleId:r,...n},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 13",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:t,"aria-labelledby":r},n),e?i.createElement("title",{id:r},e):null,i.createElement("path",{d:"M5.051.941a3.31 3.31 0 1 0 0 6.62 3.31 3.31 0 0 0 0-6.62m-1.986 3.31a1.986 1.986 0 1 1 3.971-.085 1.986 1.986 0 0 1-3.971.085m6.62 8.607H8.361a3.31 3.31 0 1 0-6.62 0H.416a4.635 4.635 0 0 1 9.268 0"}))});var o=n(94113);let l=i.forwardRef(function({title:e,titleId:r,...n},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:t,"aria-labelledby":r},n),e?i.createElement("title",{id:r},e):null,i.createElement("path",{fillRule:"evenodd",d:"M2.25.796h12v14.321l-2.4-1.6-1.8 1.2-1.8-1.2-1.8 1.2-1.8-1.2-2.4 1.6zm1.2 1.2v10.879l1.2-.8 1.8 1.2 1.8-1.2 1.8 1.2 1.8-1.2 1.2.8V1.995zm4.8 2.4a1.2 1.2 0 1 0 0 2.4 1.2 1.2 0 0 0 0-2.4m-2.4 1.2a2.4 2.4 0 1 1 4.8 0 2.4 2.4 0 0 1-4.8 0m-1.2 3.6h4.2v1.2h-4.2zm5.4 0h1.8v1.2h-1.8z",clipRule:"evenodd"}))});var a=n(59243),d=n(38421),c=n(84435),u=n(37013),h=n(2524);let m=[{href:"/[orgId]/settings/general",icon:(0,t.jsx)(s,{}),title:"General"},{href:"/[orgId]/settings/members",icon:(0,t.jsx)(o.Z,{}),title:"Members"},{href:"/[orgId]/settings/billing",icon:(0,t.jsx)(l,{}),title:"Billing"},{href:"/[orgId]/settings/taxes",icon:(0,t.jsx)(a.Z,{}),title:"Taxes"},{href:"/[orgId]/settings/mails",icon:(0,t.jsx)(d.Z,{}),title:"System mails"}],v={href:"/[orgId]/settings/logs",icon:(0,t.jsx)(c.Z,{}),title:"Logs"},x=()=>{let{hasAccess:e}=(0,u.Z)(["owner"]);return e?[...m,v]:m};function p(e){let{children:r}=e,n=x();return(0,t.jsx)(h.Z,{title:"Organization settings",links:n,children:r})}},42239:function(e,r,n){"use strict";n.d(r,{T:function(){return v},W:function(){return x}});var t=n(33618),i=n(3997),s=n(53431),o=n(18959),l=n(6491),a=n(80776);let d=i.a(t.Cv,s.a([t.Cv.AU,t.Cv.BR,t.Cv.CA,t.Cv.DE,t.Cv.GB,t.Cv.US]),o.a()),c=l.z.object({address:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(60,(0,t.e$)(t.p8.MostChars,60)).regex(a.sU,t.p8.Address),zip:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(10,(0,t.e$)(t.p8.MostChars,10)).regex(a.SW,t.p8.ZipCode),city:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(50,(0,t.e$)(t.p8.MostChars,50)).regex(a.N9,t.p8.City),country:l.z.enum(d,{required_error:t.p8.Required}),state:l.z.string().nullish()}),u=l.z.object({address:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(40,(0,t.e$)(t.p8.MostChars,40)).regex(a.sU,t.p8.Address),city:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(40,(0,t.e$)(t.p8.MostChars,40)),zip:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).regex(a.b5,t.p8.ZipCodeUS),country:l.z.literal(t.Cv.US,{required_error:t.p8.Required}),state:l.z.nativeEnum(t.JW,{required_error:t.p8.Required})}),h=c.extend({zip:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(7,(0,t.e$)(t.p8.MostChars,7)).regex(a.pW,t.p8.ZipCodeCA),country:l.z.literal(t.Cv.CA,{required_error:t.p8.Required}),state:l.z.nativeEnum(t.gy,{required_error:t.p8.Required})}),m=c.extend({zip:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).regex(a.AN,t.p8.ZipCodeGB),country:l.z.literal(t.Cv.GB,{required_error:t.p8.Required})}),v=[u,h,m,c.extend({country:l.z.literal(t.Cv.BR,{required_error:t.p8.Required}),state:l.z.nativeEnum(t.Fu,{required_error:t.p8.Required})}),c.extend({country:l.z.literal(t.Cv.DE,{required_error:t.p8.Required}),state:l.z.nativeEnum(t.iN,{required_error:t.p8.Required})}),c.extend({zip:l.z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).max(4,(0,t.e$)(t.p8.MostChars,4)),country:l.z.literal(t.Cv.AU,{required_error:t.p8.Required})}),c],x=l.z.discriminatedUnion("country",[...v],{errorMap:e=>{switch(e.code){case"invalid_union_discriminator":case"invalid_type":return{message:t.p8.Required};default:return{message:(null==e?void 0:e.message)||"Validation error"}}}})},30512:function(e,r,n){"use strict";n.d(r,{JU:function(){return v},UQ:function(){return m},zQ:function(){return x}});var t=n(33618),i=n(23808),s=n(68863),o=n(93963),l=n(6491),a=n(94216),d=n(80776),c=n(12353);let u="TAX_NUMBERS",h=l.z.object({number:l.z.string().trim().min(1,t.p8.Required).max(18,(0,t.e$)(t.p8.MostChars,18)),isDefault:l.z.boolean()}),m=l.z.object({vatNumbers:h.array().optional().superRefine((e,r)=>{e&&0!==e.length&&(e.some(e=>{let{isDefault:r}=e;return r})||e.forEach((e,n)=>{r.addIssue({message:"At least one VAT number must be set as default",code:l.z.ZodIssueCode.custom,path:[n,"isDefault"]})}))}).superRefine((e,r)=>{e&&0!==e.length&&e.forEach((n,t)=>{e.filter((e,r)=>r!==t).find(e=>e.number===n.number)&&r.addIssue({message:"Duplicate VAT numbers not allowed.",code:l.z.ZodIssueCode.custom,path:[t,"number"]})})}),ein:l.z.string().trim().regex(d.qV,"EIN number must be in format 'XX-XXXXXXX'").nullish()});function v(){let e=(0,c.X6)();return(0,i.a)({queryFn:()=>a.w.getTaxNumbers(e),select:e=>m.parse(e.data.data),queryKey:[e,u],enabled:!!e})}function x(){let e=(0,s.NL)(),r=(0,c.X6)();return(0,o.D)({mutationFn:e=>a.w.updateTaxNumbers(r,e),onSuccess:n=>{try{e.setQueryData([r,u],n)}catch(n){e.invalidateQueries({queryKey:[r,u]})}}})}},60963:function(e,r,n){"use strict";n.d(r,{Z:function(){return a}});var t=n(68863),i=n(93963),s=n(94216),o=n(12353),l=n(7004);function a(){let e=(0,t.NL)(),r=(0,o.X6)();return(0,i.D)({mutationFn:async e=>s.w.updateOrgSimple(r,e),onSuccess:()=>{e.invalidateQueries({queryKey:[r,l.N]})}})}},66968:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return T}});var t=n(70813),i=n(53164),s=n(41240),o=n(38220),l=n(55826),a=n(33618),d=n(7004);function c(){var e;let{data:r}=(0,d.Z)();return(0,t.jsxs)(o.uG,{children:[(0,t.jsx)(o.xv,{color:"waterloo",children:"Country"}),(0,t.jsx)(o.xv,{children:a.jT[null==r?void 0:r.business.country]}),(null==r?void 0:r.business.state)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.xv,{color:"waterloo",children:"State"}),(0,t.jsx)(o.xv,{children:(0,a.fj)(r.business.country)?null===(e=a.sD[r.business.country].find(e=>{let{value:n}=e;return n===(null==r?void 0:r.business.state)}))||void 0===e?void 0:e.label:null==r?void 0:r.business.state})]}),(0,t.jsx)(o.xv,{color:"waterloo",children:"Street"}),(0,t.jsx)(o.xv,{children:null==r?void 0:r.business.address}),(0,t.jsx)(o.xv,{color:"waterloo",children:"Zip"}),(0,t.jsx)(o.xv,{children:null==r?void 0:r.business.zip}),(0,t.jsx)(o.xv,{color:"waterloo",children:"City"}),(0,t.jsx)(o.xv,{children:null==r?void 0:r.business.city})]})}var u=n(18159),h=n(44065),m=n(83160),v=n(42239),x=n(60963);function p(e){var r,n,i;let{closeForm:s}=e,{isPending:c,mutate:p}=(0,x.Z)(),{data:f}=(0,d.Z)(),b=(0,o.pm)(),{formState:{isDirty:g,errors:j,isSubmitSuccessful:y},handleSubmit:w,register:C,control:z,reset:R,watch:k}=(0,h.cI)({defaultValues:{...null==f?void 0:f.business,state:(null==f?void 0:f.business.state)||void 0},resolver:(0,u.F)(v.W),mode:"onTouched"}),Q=k("country"),Z=(0,l.useCallback)(()=>{s(),R()},[s,R]),{openUnsavedAlertDialog:E,UnsavedAlert:_}=(0,m.Q)({shouldConfirmLeave:g&&!y,onDiscard:Z}),q=w(e=>{p({business:{state:e.state||void 0,country:e.country,address:e.address,city:e.city,zip:e.zip}},{onSuccess:()=>{Z(),b({title:"Business address successfully changed",variant:"success"})}})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{onSubmit:q,children:[(0,t.jsx)(h.Qr,{render:e=>{let{field:r}=e;return(0,t.jsx)(o.aL,{description:"Business country was defined during registration and it can’t be changed.",onChange:r.onChange,value:r.value,label:"Country",id:r.name,disabled:!0})},control:z,name:"country"}),(0,a.fj)(Q)&&(0,t.jsx)(h.Qr,{render:e=>{var r;let{field:n}=e;return(0,t.jsx)(o.mg,{errorMessage:null===(r=j.state)||void 0===r?void 0:r.message,options:a.sD[Q],onValueChange:n.onChange,placeholder:"Select state",value:n.value,id:n.name,label:"State"})},control:z,name:"state"}),(0,t.jsx)(o.UP,{...C("address"),errorMessage:null===(r=j.address)||void 0===r?void 0:r.message,autoComplete:"street-address",placeholder:"Address",label:"Address",id:"address"}),(0,t.jsxs)(o.rj,{gridTemplateColumns:"1fr 1fr",gridGap:"sm",children:[(0,t.jsx)(o.UP,{...C("zip"),errorMessage:null===(n=j.zip)||void 0===n?void 0:n.message,autoComplete:"postal-code",placeholder:"Zip",label:"Zip",id:"zip"}),(0,t.jsx)(o.UP,{...C("city"),errorMessage:null===(i=j.city)||void 0===i?void 0:i.message,autoComplete:"address-level2",placeholder:"City",label:"City",id:"city"})]}),(0,t.jsxs)(o.QQ.ContentAction,{children:[(0,t.jsx)(o.zx,{onClick:E,disabled:c,variant:"secondary",type:"button",size:"md",children:"Cancel"}),(0,t.jsx)(o.zx,{$loading:c,variant:"primary",type:"submit",size:"md",children:"Save"})]})]}),(0,t.jsx)(_,{})]})}function f(){let[e,r]=(0,l.useState)(!1);return(0,t.jsxs)(o.QQ.Root,{id:"business-address",children:[(0,t.jsxs)(o.QQ.Header,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.QQ.Title,{children:"Business address"}),(0,t.jsx)(o.QQ.Description,{children:"The address that will be shown on invoices and receipts delivered to your customers."})]}),(0,t.jsx)(o.QQ.HeaderAction,{children:!e&&(0,t.jsx)(o.zx,{"data-testid":"businessAddress-edit",onClick:()=>r(!0),variant:"secondary",size:"lg",children:"Edit"})})]}),(0,t.jsxs)(o.QQ.Content,{children:[!e&&(0,t.jsx)(o.Uo,{children:(0,t.jsx)(c,{})}),e&&(0,t.jsx)(o.Uo,{children:(0,t.jsx)(p,{closeForm:()=>r(!1)})})]})]})}var b=n(30512),g=n(56769),j=n(47541),y=n(12353),w=n(93133),C=n(1222);function z(){return(0,t.jsxs)(o.J2.Root,{children:[(0,t.jsx)(o.J2.Trigger,{asChild:!0,children:(0,t.jsx)(C.Z,{})}),(0,t.jsxs)(o.J2.Content,{children:[(0,t.jsx)(o.J2.Title,{icon:(0,t.jsx)(w.Z,{}),children:"Set as default"}),(0,t.jsx)(o.J2.Description,{children:"This VAT number will be automatically used on every invoice. If you want to use a different VAT number on a specific invoice, you can edit it manually."})]})]})}function R(e){var r;let{isPending:n,isError:i,refetch:s,data:a}=e,d=(0,j.Z)({message:"ID successfully copied."}),c=(0,y.X6)();return n?(0,t.jsx)(o.Ib,{loading:!0}):i?(0,t.jsx)(o.Te,{resource:"organization info",retry:()=>s()}):(0,t.jsxs)(o.uG,{children:[(0,t.jsx)(o.xv,{color:"waterloo",children:"Organization ID"}),(0,t.jsxs)(o.kC,{alignItems:"center",gridGap:"xxs",children:[(0,t.jsx)(o.xv,{children:c}),(0,t.jsx)(o.hU,{"data-testid":"organizationInformation-copyId",onClick:()=>d(c),"aria-label":"Copy to clipboard",variant:"secondary",size:"md",children:(0,t.jsx)(g.Z,{})})]}),(null===(r=a.vatNumbers)||void 0===r?void 0:r.length)?a.vatNumbers.map((e,r)=>{let{isDefault:n,number:i}=e;return(0,t.jsxs)(l.Fragment,{children:[(0,t.jsxs)(o.xv,{color:"waterloo",children:["VAT ID ",r+1]}),(0,t.jsxs)(o.kC,{alignItems:"center",gridGap:"xs",children:[(0,t.jsxs)(o.xv,{children:[i,n&&" (default)"]}),n&&(0,t.jsx)(z,{})]})]},i)}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.xv,{color:"waterloo",children:"VAT"}),(0,t.jsx)(o.xv,{color:"waterloo",children:"No VAT numbers set"})]}),(0,t.jsx)(o.xv,{color:"waterloo",children:"EIN number"}),(null==a?void 0:a.ein)?(0,t.jsx)(o.xv,{children:a.ein}):(0,t.jsx)(o.xv,{color:"waterloo",children:"No EIN number set"})]})}var k=n(74775),Q=n(28639);function Z(e){var r;let{defaultValues:n,closeForm:i}=e,{isPending:s,mutate:a}=(0,b.zQ)(),d=(0,y.X6)(),c=(0,o.pm)(),{formState:{isDirty:v,errors:x,isSubmitSuccessful:p},handleSubmit:f,getValues:g,setValue:j,register:w,control:C,reset:R}=(0,h.cI)({resolver:(0,u.F)(b.UQ),mode:"onTouched",defaultValues:n}),{fields:Z,append:E,remove:_}=(0,h.Dq)({name:"vatNumbers",control:C}),q=(0,l.useCallback)(e=>{var r;j("vatNumbers",null===(r=g("vatNumbers"))||void 0===r?void 0:r.map((r,n)=>({...r,isDefault:n===e})))},[g,j]),S=()=>{i(),R()},{openUnsavedAlertDialog:O,UnsavedAlert:A}=(0,m.Q)({shouldConfirmLeave:v&&!p,onDiscard:S}),D=f(e=>{a(e,{onSuccess:()=>{S(),c({title:"Changes have been saved",variant:"success"})}})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{onSubmit:D,children:[(0,t.jsx)(o.UP,{description:"Your Organization ID number was assigned beforehand and cannot be changed.",label:"Organization ID",value:d,disabled:!0}),(0,t.jsx)(o.kC,{flexDirection:"column",gridGap:"sm",children:Z.map((e,r)=>{var n,i,s,l,a,d;return(0,t.jsxs)(o.xu,{width:"100%",mb:"md",children:[(0,t.jsxs)(o.kC,{alignItems:"start",gridGap:"sm",children:[(0,t.jsx)(o.UP,{...w("vatNumbers.".concat(r,".number")),errorMessage:null==x?void 0:null===(s=x.vatNumbers)||void 0===s?void 0:null===(i=s[r])||void 0===i?void 0:null===(n=i.number)||void 0===n?void 0:n.message,placeholder:"Enter VAT number",label:"VAT ID ".concat(r+1)}),(0,t.jsx)(o.hU,{onClick:()=>_(r),"aria-label":"Delete",variant:"secondary",type:"button",size:"lg",mt:"xl",children:(0,t.jsx)(k.Z,{})})]}),(0,t.jsx)(o.KV,{...w("vatNumbers.".concat(r,".isDefault")),label:(0,t.jsxs)(o.kC,{alignItems:"center",gridGap:"xs",children:["Set as default ",(0,t.jsx)(z,{})]}),errorMessage:null==x?void 0:null===(d=x.vatNumbers)||void 0===d?void 0:null===(a=d[r])||void 0===a?void 0:null===(l=a.isDefault)||void 0===l?void 0:l.message,onCheckedChange:()=>q(r),id:"vatNumbers.".concat(r,".isDefault"),checked:e.isDefault})]},e.id)})}),(0,t.jsxs)(o.zx,{onClick:()=>E({isDefault:!1,number:""}),variant:"secondary",type:"button",size:"md",mb:"md",fullWidth:!0,children:[(0,t.jsx)(Q.Z,{}),"Add VAT number"]}),(0,t.jsx)(o.UP,{...w("ein"),errorMessage:null==x?void 0:null===(r=x.ein)||void 0===r?void 0:r.message,placeholder:"Enter EIN number",label:"EIN number"}),(0,t.jsxs)(o.QQ.ContentAction,{children:[(0,t.jsx)(o.zx,{onClick:O,disabled:s,variant:"secondary",type:"button",size:"md",children:"Cancel"}),(0,t.jsx)(o.zx,{$loading:s,variant:"primary",type:"submit",size:"md",children:"Save"})]})]}),(0,t.jsx)(A,{})]})}function E(){let[e,r]=(0,l.useState)(!1),n=(0,b.JU)();return(0,t.jsxs)(o.QQ.Root,{id:"organization-information",children:[(0,t.jsxs)(o.QQ.Header,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.QQ.Title,{children:"Organization information"}),(0,t.jsx)(o.QQ.Description,{children:"VAT ID can be shown on invoices and receipts delivered to your customers."})]}),(0,t.jsx)(o.QQ.HeaderAction,{children:n.isSuccess&&!e&&(0,t.jsx)(o.zx,{"data-testid":"organizationInformation-edit",onClick:()=>r(!0),variant:"secondary",size:"lg",children:"Edit"})})]}),(0,t.jsxs)(o.QQ.Content,{children:[!e&&(0,t.jsx)(o.Uo,{children:(0,t.jsx)(R,{...n})}),e&&(0,t.jsx)(o.Uo,{children:(0,t.jsx)(Z,{closeForm:()=>r(!1),defaultValues:n.data})})]})]})}var _=n(98506),q=n(6491),S=n(80776),O=n(65928),A=n(43357);let D=q.z.object({website:q.z.string().trim().toLowerCase().min(1,a.p8.Required).max(65,(0,a.e$)(a.p8.MostChars,65)).regex(S.Wh,a.p8.Url).refine(A.Z,{message:a.p8.Url}),name:q.z.string().trim().min(1,a.p8.Required).max(60,(0,a.e$)(a.p8.MostChars,60)),email:q.z.string().trim().toLowerCase().min(1,a.p8.Required).email(a.p8.Email),phone:O.o});var I=e=>{var r,n,i,s;let{closeForm:l}=e,{data:c}=(0,d.Z)(),{formState:{isDirty:v,errors:p,isSubmitSuccessful:f},handleSubmit:b,register:g,control:j,reset:y}=(0,h.cI)({defaultValues:{...null==c?void 0:c.business,phone:(0,a._C)(null==c?void 0:c.business.phone.countryCode,null==c?void 0:c.business.phone.number)},resolver:(0,u.F)(D),mode:"onTouched"}),{isPending:w,mutate:C}=(0,x.Z)(),z=(0,o.pm)(),R=()=>{l(),y()},{openUnsavedAlertDialog:k,UnsavedAlert:Q}=(0,m.Q)({shouldConfirmLeave:v&&!f,onDiscard:R}),Z=async e=>{let r=(0,_.h)(e.phone);C({business:{...e,phone:{countryCode:null==r?void 0:r.countryCallingCode,number:null==r?void 0:r.nationalNumber}}},{onSuccess:()=>{R(),z({title:"Website settings successfully changed",variant:"success"})}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{onSubmit:b(Z),children:[(0,t.jsx)(o.UP,{...g("name"),errorMessage:null===(r=p.name)||void 0===r?void 0:r.message,placeholder:"Enter website name",label:"Website Name",id:"name"}),(0,t.jsx)(o.UP,{...g("website"),placeholder:"Enter customer website address",errorMessage:null===(n=p.website)||void 0===n?void 0:n.message,id:"website",label:"URL"}),(0,t.jsx)(o.UP,{...g("email"),placeholder:"Enter customer service mail",errorMessage:null===(i=p.email)||void 0===i?void 0:i.message,label:"Customer Service Mail",id:"email"}),(0,t.jsx)(o.D,{errorMessage:null===(s=p.phone)||void 0===s?void 0:s.message,dataTestId:"website-phoneCountry",label:"Customer Service Phone",rules:{required:!0},control:j,name:"phone"}),(0,t.jsxs)(o.QQ.ContentAction,{children:[(0,t.jsx)(o.zx,{onClick:k,disabled:w,variant:"secondary",type:"button",size:"md",children:"Cancel"}),(0,t.jsx)(o.zx,{$loading:w,variant:"primary",type:"submit",size:"md",children:"Save"})]})]}),(0,t.jsx)(Q,{})]})};function M(){var e,r,n,i;let[s,c]=(0,l.useState)(!1),{data:u}=(0,d.Z)();return(0,t.jsxs)(o.QQ.Root,{id:"website",children:[(0,t.jsxs)(o.QQ.Header,{children:[(0,t.jsx)(o.QQ.Title,{children:"Website"}),(0,t.jsx)(o.QQ.HeaderAction,{children:!s&&(0,t.jsx)(o.zx,{onClick:()=>c(!0),"data-testid":"website-edit",variant:"secondary",size:"lg",children:"Edit"})})]}),(0,t.jsxs)(o.QQ.Content,{children:[!s&&(0,t.jsx)(o.Uo,{children:(0,t.jsxs)(o.uG,{"data-testid":"website-dataView",children:[(0,t.jsx)(o.xv,{color:"waterloo",children:"Website Name"}),(0,t.jsx)(o.xv,{children:null==u?void 0:u.business.name}),(0,t.jsx)(o.xv,{color:"waterloo",children:"URL"}),(0,t.jsx)(o.xv,{children:null==u?void 0:u.business.website}),(0,t.jsx)(o.xv,{color:"waterloo",children:"Customer Service Mail"}),(0,t.jsx)(o.xv,{children:null==u?void 0:u.business.email}),(0,t.jsx)(o.xv,{color:"waterloo",children:"Customer Service Phone"}),(0,t.jsx)(o.xv,{children:(0,a._C)(null==u?void 0:null===(r=u.business)||void 0===r?void 0:null===(e=r.phone)||void 0===e?void 0:e.countryCode,null==u?void 0:null===(i=u.business)||void 0===i?void 0:null===(n=i.phone)||void 0===n?void 0:n.number)})]})}),s&&(0,t.jsx)(o.Uo,{children:(0,t.jsx)(I,{closeForm:()=>c(!1)})})]})]})}let N=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E,{}),(0,t.jsx)(f,{}),(0,t.jsx)(M,{})]});N.getLayout=e=>(0,t.jsx)(i.Z,{children:(0,t.jsx)(s.Z,{children:e})});var T=N},65928:function(e,r,n){"use strict";n.d(r,{o:function(){return s}});var t=n(33618),i=n(17649);let s=n(6491).z.string({invalid_type_error:t.p8.Required}).trim().min(1,t.p8.Required).refine(i.y,{message:t.p8.Phone})},43357:function(e,r,n){"use strict";n.d(r,{Z:function(){return i}});var t=n(66829);function i(e){return(0,t.isURL)(e,{require_protocol:!0,protocols:["https"]})}},17649:function(e,r,n){"use strict";n.d(r,{y:function(){return m}});var t=n(60020),i=n(73087),s=n(95750),o=n(19822),l=n(32772);function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach(function(r){var t;t=n[r],r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach(function(r){var t;t=n[r],r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h(){var e=(0,i.Z)(arguments),r=e.text,n=e.options,t=e.metadata,a=function(e,r,n){r&&r.defaultCountry&&!(0,l.aS)(r.defaultCountry,n)&&(r=d(d({},r),{},{defaultCountry:void 0}));try{return(0,s.Z)(e,r,n)}catch(e){if(e instanceof o.Z);else throw e}}(r,n=u(u({},n),{},{extract:!1}),t);return a&&a.isValid()||!1}function m(){return(0,t.Z)(h,arguments)}},98506:function(e,r,n){"use strict";n.d(r,{h:function(){return l}});var t=n(60020),i=n(95750),s=n(73087);function o(){var e=(0,s.Z)(arguments),r=e.text,n=e.options,t=e.metadata;return(0,i.Z)(r,n,t)}function l(){return(0,t.Z)(o,arguments)}},56769:function(e,r,n){"use strict";var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{d:"M10.975.667h-8c-.733 0-1.333.6-1.333 1.333v9.333h1.333V2h8zm2 2.666H5.642c-.733 0-1.333.6-1.333 1.334V14c0 .733.6 1.333 1.333 1.333h7.333c.734 0 1.334-.6 1.334-1.333V4.667c0-.734-.6-1.334-1.334-1.334m0 10.667H5.642V4.667h7.333z"}))});r.Z=i},38421:function(e,r,n){"use strict";var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{d:"M15.75 3.5c0-.825-.675-1.5-1.5-1.5h-12c-.825 0-1.5.675-1.5 1.5v9c0 .825.675 1.5 1.5 1.5h12c.825 0 1.5-.675 1.5-1.5zm-1.5 0-6 3.75-6-3.75zm0 9h-12V5l6 3.75 6-3.75z"}))});r.Z=i},31733:function(e,r,n){"use strict";var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",style:{flexShrink:0,display:"inline-block"},stroke:"currentColor","aria-hidden":"true","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("circle",{cx:8,cy:8,r:7.5}),t.createElement("path",{fill:"currentColor",d:"m9.778 11.448-.121.502c-.412.164-1.84.85-2.663.12a1.06 1.06 0 0 1-.368-.829c0-.627.205-1.174.573-2.487.064-.247.144-.57.144-.825 0-.44-.166-.558-.616-.558-.22 0-.462.08-.682.162l.122-.502c.49-.2 1.106-.446 1.633-.446.792 0 1.373.398 1.373 1.155 0 .218-.037.6-.116.864l-.455 1.623c-.093.328-.264 1.05 0 1.265.26.212.874.1 1.176-.044M8.962 5.602A.997.997 0 0 0 9.955 4.6c0-.553-.444-1.001-.993-1.001a.997.997 0 0 0-.992 1c0 .553.444 1.002.992 1.002"}))});r.Z=i},59243:function(e,r,n){"use strict";var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{fillRule:"evenodd",d:"M13.55.985a.65.65 0 0 1 .12.912l-10 13a.65.65 0 1 1-1.03-.793l10-13a.65.65 0 0 1 .91-.119M4.655 2.151a1.85 1.85 0 1 0 0 3.7 1.85 1.85 0 0 0 0-3.7M1.504 4a3.15 3.15 0 1 1 6.3 0 3.15 3.15 0 0 1-6.3 0m8.3 8a1.85 1.85 0 1 1 3.7 0 1.85 1.85 0 0 1-3.7 0m1.85-3.15a3.15 3.15 0 1 0 0 6.3 3.15 3.15 0 0 0 0-6.3",clipRule:"evenodd"}))});r.Z=i},28639:function(e,r,n){"use strict";var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 15 15",style:{flexShrink:0,display:"inline-block"},stroke:"currentColor","aria-hidden":"true","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 2.309v10.5M12.75 7.559H2.25"}))});r.Z=i},74775:function(e,r,n){"use strict";var t=n(55826);let i=t.forwardRef(function({title:e,titleId:r,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},stroke:"currentColor","aria-hidden":"true","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":r},n),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeMiterlimit:10,d:"M13.583 6v8a1.333 1.333 0 0 1-1.333 1.333h-8A1.333 1.333 0 0 1 2.917 14V6M.917 3.334h14.666M5.583 3.333V.667h5.334v2.666M10.25 7.99l-4 4M10.25 11.99l-4-4"}))});r.Z=i}},function(e){e.O(0,[6843,3993,2627,5953,8159,1591,6829,7382,9855,3164,2888,9774,179],function(){return e(e.s=18278)}),_N_E=e.O()}]);