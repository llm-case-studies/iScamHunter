try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="468928a7-dbd9-4c09-ae75-56feea37d515",e._sentryDebugIdIdentifier="sentry-dbid-468928a7-dbd9-4c09-ae75-56feea37d515")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9895],{89717:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[orgId]/settings/logs",function(){return n(73088)}])},82901:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var i=n(70813),r=n(30582),a=n(70318),o=n(38220);function l(e){let{hideFiltersButton:t=!1,onShowFilters:n,maxResults:l=1e3}=e;return(0,i.jsx)(o.Uo,{children:(0,i.jsxs)(o.kC,{flexDirection:"column",alignItems:"center",justifyContent:"center",gridGap:"md",textAlign:"center",p:"xl",children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)(o.xv,{fontSize:"h4",color:"pickledBluewood",children:"Maximum results reached"}),(0,i.jsxs)(o.xv,{color:"waterloo",children:[(0,i.jsxs)("span",{children:["You've reached the ",l.toLocaleString()," result limit."]}),(0,i.jsx)("br",{}),!t&&(0,i.jsx)("span",{children:"Use filters to narrow your search and find more specific results."})]}),!t&&(0,i.jsxs)(o.zx,{size:"lg",onClick:n,children:[(0,i.jsx)(a.Z,{})," Show filters"]})]})})}},59193:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(55826);function r(e){let{totalCount:t,pagination:n,limit:r=1e3}=e;return(0,i.useMemo)(()=>{let e=Math.ceil(r/n.limit),i=t>r;return{isAtMaximumPage:i&&n.page>e,adjustedTotalCount:i?r+n.limit:t}},[t,n.limit,n.page,r])}},33721:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(43381),r=n(55826);function a(e,t){let n=(0,i.useRouter)();return(0,r.useEffect)(()=>{n.isReady&&e&&(t?n.replace(t):n.back())},[e,t,n]),{redirected:e}}},2524:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var i=n(70813),r=n(68437),a=n(38220),o=n(31791),l=n(66843),s=n.n(l),c=n(50288),d=n(14755),u=n(87563),h=n(12353);function m(){let e=(0,o._)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  transition: all 300ms;\n\n  width: 2.4rem;\n  height: 2.4rem;\n\n  color: ",";\n\n  border-width: 1px;\n  border-style: solid;\n  border-radius: ",";\n  border-color: ",";\n"]);return m=function(){return e},e}function f(){let e=(0,o._)(["\n  &[data-active] {\n    "," {\n      color: ",";\n      border-color: ",";\n      background-color: ",";\n    }\n  }\n\n  &[data-blocked] {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n"]);return f=function(){return e},e}let g=c.zo.span(m(),r.Q2.colors.waterloo,r.Q2.radii.xs,r.Q2.colors.mystic),x=(0,c.zo)(a.i9.Link)(f(),g,r.Q2.colors.white,r.Q2.colors.blueRibbon,r.Q2.colors.blueRibbon);function p(e){let{links:t}=e,{data:n}=(0,u.Z)(),o=(0,d.Z)(),l=(0,h.X6)();return(0,i.jsx)(a.i9.Root,{orientation:"vertical",children:(0,i.jsx)(a.i9.List,{children:t.map(e=>{let{title:t,href:c,icon:d}=e;return(0,i.jsx)(a.i9.Item,{children:(0,i.jsx)(x,{"data-blocked":"Billing"!==t&&null!=n&&!!n.isBlocked||void 0,active:o(c,!1),asChild:!0,children:(0,i.jsx)(s(),{href:{query:{orgId:l},pathname:c},children:(0,i.jsxs)(a.xu,{display:"grid",alignItems:"center",gridTemplateColumns:"".concat(r.Q2.space.xl," 1fr"),gap:"xs",children:[(0,i.jsx)(g,{children:d}),t]})})},t)},t)})})})}function v(){let e=(0,o._)(["\n  &[data-blocked] {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n"]);return v=function(){return e},e}function j(){let e=(0,o._)(["\n  padding-left: ",";\n  padding-right: ",";\n"]);return j=function(){return e},e}let b=(0,c.zo)(a.i9.Link)(v()),y=(0,c.zo)(a.i9.List)(j(),r.Q2.space.sm,r.Q2.space.sm);function w(e){let{links:t}=e,{data:n}=(0,u.Z)(),r=(0,d.Z)(),o=(0,h.X6)();return(0,i.jsx)(a.i9.Root,{children:(0,i.jsx)(y,{children:t.map(e=>(0,i.jsx)(a.i9.Item,{children:(0,i.jsx)(b,{"data-blocked":"Billing"!==e.title&&null!=n&&!!n.isBlocked||void 0,active:r(e.href),asChild:!0,children:(0,i.jsx)(s(),{href:{query:{orgId:o},pathname:e.href},children:e.title})})},e.href))})})}function k(e){let{children:t,links:n,title:o}=e;return(0,i.jsxs)(a.xu,{display:["block","block","block","grid"],gridTemplateColumns:"22rem 1fr",minHeight:"100%",children:[(0,i.jsx)(a.ZN,{children:(0,i.jsxs)(a.xu,{backgroundColor:"white",pt:"xl",children:[(0,i.jsx)(a.xv,{color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",lineHeight:"small",mb:"xl",px:"sm",children:o}),(0,i.jsx)(w,{links:n})]})}),(0,i.jsx)(a.Nl,{children:(0,i.jsx)(a.xu,{boxShadow:"1px 0px 0px ".concat(r.Q2.colors.mystic,", 0px 1px 0px ").concat(r.Q2.colors.mystic,", 0px 1px 2px rgba(218, 228, 232, 0.5)"),backgroundColor:"athensGray",children:(0,i.jsx)(a.xu,{position:"sticky",top:"0",p:"xl",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(a.xv,{color:"pickledBluewood",fontFamily:"heading",fontWeight:"medium",mb:"xl",children:o}),(0,i.jsx)(p,{links:n})]})})})}),(0,i.jsx)(a.kC,{p:["md","md","md","xl"],flexDirection:"column",gridGap:"xl",children:t})]})}},41240:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(70813),r=n(55826);let a=r.forwardRef(function({title:e,titleId:t,...n},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 13",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M5.051.941a3.31 3.31 0 1 0 0 6.62 3.31 3.31 0 0 0 0-6.62m-1.986 3.31a1.986 1.986 0 1 1 3.971-.085 1.986 1.986 0 0 1-3.971.085m6.62 8.607H8.361a3.31 3.31 0 1 0-6.62 0H.416a4.635 4.635 0 0 1 9.268 0"}))});var o=n(94113);let l=r.forwardRef(function({title:e,titleId:t,...n},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:i,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25.796h12v14.321l-2.4-1.6-1.8 1.2-1.8-1.2-1.8 1.2-1.8-1.2-2.4 1.6zm1.2 1.2v10.879l1.2-.8 1.8 1.2 1.8-1.2 1.8 1.2 1.8-1.2 1.2.8V1.995zm4.8 2.4a1.2 1.2 0 1 0 0 2.4 1.2 1.2 0 0 0 0-2.4m-2.4 1.2a2.4 2.4 0 1 1 4.8 0 2.4 2.4 0 0 1-4.8 0m-1.2 3.6h4.2v1.2h-4.2zm5.4 0h1.8v1.2h-1.8z",clipRule:"evenodd"}))});var s=n(59243),c=n(38421),d=n(84435),u=n(37013),h=n(2524);let m=[{href:"/[orgId]/settings/general",icon:(0,i.jsx)(a,{}),title:"General"},{href:"/[orgId]/settings/members",icon:(0,i.jsx)(o.Z,{}),title:"Members"},{href:"/[orgId]/settings/billing",icon:(0,i.jsx)(l,{}),title:"Billing"},{href:"/[orgId]/settings/taxes",icon:(0,i.jsx)(s.Z,{}),title:"Taxes"},{href:"/[orgId]/settings/mails",icon:(0,i.jsx)(c.Z,{}),title:"System mails"}],f={href:"/[orgId]/settings/logs",icon:(0,i.jsx)(d.Z,{}),title:"Logs"},g=()=>{let{hasAccess:e}=(0,u.Z)(["owner"]);return e?[...m,f]:m};function x(e){let{children:t}=e,n=g();return(0,i.jsx)(h.Z,{title:"Organization settings",links:n,children:t})}},73088:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var i=n(70813),r=n(31552),a=n(38220),o=n(33721),l=n(53164),s=n(41240),c=n(51685),d=n(23808),u=n(15012),h=n(94216),m=n(12353);let f=e=>{let{sortDirection:t,filters:n,sortBy:i,limit:r,page:a}=e,{...o}=n;return{type:n.type,sortDirection:t,offset:(a-1)*r,sortBy:i,limit:r,...o}};var g=n(90844),x=n(33618),p=n(81363),v=n(82901),j=n(59193);let b={"invitation-accepted":e=>{var t;return"".concat(e.actionOnUserName," accepted ").concat(null==e?void 0:null===(t=e.invitees)||void 0===t?void 0:t[0].email," invitation to join the organization")},"invitation-incorrect":e=>{var t;return"".concat(e.userName," invited ").concat(null==e?void 0:null===(t=e.invitees)||void 0===t?void 0:t[0].email,", but there was an issue with the invitation")},"insufficient-role-for-action":e=>"".concat(null==e?void 0:e.userName," tried to perform an action that is available for ").concat(e.toRole," role"),"access-approved":e=>"".concat(e.userName," approved access request from ").concat(e.actionOnUserName,", adding ").concat(e.toRole," role"),"organization-member-updated":e=>"".concat(e.userName," updated ").concat(e.actionOnUserName," role in the organization"),"invitation-created":e=>{var t;return"".concat(e.userName," has invited ").concat(null==e?void 0:null===(t=e.invitees)||void 0===t?void 0:t[0].email," to join the organization")},"organization-member-removed":e=>"".concat(e.userName," removed ").concat(e.actionOnUserName," from the organization"),"access-declined":e=>"".concat(e.userName," declined access request from ").concat(e.actionOnUserName),"invitation-rejected":e=>{var t;return"".concat(e.userName," declined ").concat(null==e?void 0:null===(t=e.invitees)||void 0===t?void 0:t[0].email," invitation")},"invitation-removed":e=>"Invitation for ".concat(e.actionOnUserName," has been removed"),"owner-assign-to-organization":()=>"New owner has been added to the organization","access-requested":e=>"".concat(e.userName," requested access to the organization"),"organization-member-remove-failure":()=>"Organization member remove failure","organization-member-update-failure":()=>"Organization member update failure","authentication-failure-mismatched-token":()=>"Token authentication failed","login-failure":e=>"Login attempt failed for ".concat(e.actionOnUserName),"user-created":e=>"New user ".concat(e.userName," has been created"),"login-sucess":e=>"".concat(e.userName," successfully logged in"),"access-rejected":e=>"Access rejected for ".concat(e.userName),"authentication-failure":()=>"User authentication failed","session-rejected":()=>"Token validation general failure","login-attempt-without-data":()=>"Missing data"};function y(e){var t;let{membersLogs:n}=e;return n.isPending?(0,i.jsx)(a.iA.Loading,{columns:3}):null===(t=n.data)||void 0===t?void 0:t.membersLogs.map(e=>(0,i.jsxs)(a.iA.BodyRow,{children:[(0,i.jsx)(a.iA.BodyCell,{children:b[e.type](e)}),(0,i.jsx)(a.iA.BodyCell,{children:e.type}),(0,i.jsx)(a.iA.BodyCell,{children:(0,x.s6)(e.createdAt)})]},e.id))}function w(e){var t;let{pagination:n,membersLogs:r}=e,{isAtMaximumPage:o,adjustedTotalCount:l}=(0,j.V)({totalCount:(null===(t=r.data)||void 0===t?void 0:t.totalCount)||0,pagination:n});return r.isError?(0,i.jsx)(a.kC,{justifyContent:"center",alignItems:"center",mt:"md",children:(0,i.jsx)(a.Te,{resource:"members logs",retry:r.refetch})}):r.isSuccess&&0===r.data.membersLogs.length?(0,i.jsx)(a.ML,{title:"No members logs found"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.kC,{justifyContent:"end",pt:"sm",children:[r.isSuccess&&(0,i.jsx)(a.vI,{onPageChange:n.updatePage,currentPage:n.page,totalCount:l,perPage:n.limit}),r.isPending&&(0,i.jsx)(p.Z,{width:100,height:20.5})]}),(0,i.jsxs)(a.iA.Root,{children:[(0,i.jsx)(a.iA.Header,{children:(0,i.jsxs)(a.iA.HeaderRow,{children:[(0,i.jsx)(a.iA.HeaderCell,{children:"Message"}),(0,i.jsx)(a.iA.HeaderCell,{children:"Action"}),(0,i.jsx)(a.iA.HeaderCell,{...n.getSortingProps("createdAt"),children:"Time"})]})}),(0,i.jsx)(a.iA.Body,{children:!o&&(0,i.jsx)(y,{membersLogs:r})})]}),o&&(0,i.jsx)(v.h,{hideFiltersButton:!0}),(0,i.jsxs)(a.kC,{justifyContent:"end",pt:"sm",children:[r.isSuccess&&(0,i.jsx)(a.vI,{onPageChange:n.updatePage,currentPage:n.page,totalCount:l,perPage:n.limit}),r.isPending&&(0,i.jsx)(p.Z,{width:100,height:20.5})]})]})}var k=n(37013);let C=Object.values(r.fZ).map(e=>({label:e,value:e})),N=()=>{let{isSuccess:e,hasAccess:t}=(0,k.Z)(["owner"]),{pagination:n,membersLogs:r}=function(){let e=(0,m.X6)(),t=(0,c.xp)({defaultFilters:{limit:10}}),n=f(t);return{membersLogs:(0,d.a)({queryFn:async()=>{let t=await (0,u.v)();if(!(null==t?void 0:t.sub))throw Error("No logged in user");let{data:i}=await h.w.getMembersLogs({userId:t.sub,organizationId:e},n);return i},select:e=>{let{totalCount:t,data:n}=e;return{membersLogs:g.sv.array().parse(n),totalCount:t}},queryKey:[e,"MEMBERS_LOGS",n],enabled:!!e}),pagination:t}}(),l=(0,m.X6)();return(0,o.Z)(e&&!t,{pathname:"/[orgId]/settings/general",query:{orgId:l}}),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.QQ.Root,{children:[(0,i.jsxs)(a.QQ.Header,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.QQ.Title,{children:"Logs"}),(0,i.jsx)(a.QQ.Description,{children:"Records of events and activities that take place in your organization."})]}),(0,i.jsx)(a.QQ.HeaderAction,{children:(0,i.jsx)(a.xu,{width:"25.6rem",children:(0,i.jsx)(a.If,{onChange:e=>n.updateFilter({type:e}),value:n.filters.type||[],options:C,placeholder:"Action: All"})})})]}),(0,i.jsx)(a.xu,{pt:"2xl",children:(0,i.jsx)(w,{membersLogs:r,pagination:n})})]})})};N.getLayout=e=>(0,i.jsx)(l.Z,{children:(0,i.jsx)(s.Z,{children:e})});var z=N},70318:function(e,t,n){"use strict";var i=n(55826);let r=i.forwardRef(function({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M13.309 3h-10a1 1 0 0 0 0 2h10a1 1 0 1 0 0-2M11.309 7h-6a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2M9.309 11h-2a1 1 0 0 0 0 2h2a1 1 0 0 0 0-2"}))});t.Z=r},38421:function(e,t,n){"use strict";var i=n(55826);let r=i.forwardRef(function({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M15.75 3.5c0-.825-.675-1.5-1.5-1.5h-12c-.825 0-1.5.675-1.5 1.5v9c0 .825.675 1.5 1.5 1.5h12c.825 0 1.5-.675 1.5-1.5zm-1.5 0-6 3.75-6-3.75zm0 9h-12V5l6 3.75 6-3.75z"}))});t.Z=r},59243:function(e,t,n){"use strict";var i=n(55826);let r=i.forwardRef(function({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",style:{flexShrink:0,display:"inline-block"},"aria-hidden":"true",fill:"currentColor","data-slot":"icon",height:16,width:16,ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M13.55.985a.65.65 0 0 1 .12.912l-10 13a.65.65 0 1 1-1.03-.793l10-13a.65.65 0 0 1 .91-.119M4.655 2.151a1.85 1.85 0 1 0 0 3.7 1.85 1.85 0 0 0 0-3.7M1.504 4a3.15 3.15 0 1 1 6.3 0 3.15 3.15 0 0 1-6.3 0m8.3 8a1.85 1.85 0 1 1 3.7 0 1.85 1.85 0 0 1-3.7 0m1.85-3.15a3.15 3.15 0 1 0 0 6.3 3.15 3.15 0 0 0 0-6.3",clipRule:"evenodd"}))});t.Z=r},51685:function(e,t,n){"use strict";n.d(t,{xp:function(){return p}});var i=n(55826),r=n(13550),a=n(88657),o=n(53431),l=n(16107),s=n(47551),c=n(8525),d=n(93209),u=n(46203),h=n(95488),m=n(37099);function f(e){return!m.a(e).length}var g={search:"",limit:20,page:1},x=["search","page","limit","sortDirection","sortBy"];function p(e){let[t,n]=(0,h.useQueryParam)(e?.token||"filters",{decode:t=>{if(t&&r.a(t))try{return u.ZP.parse(decodeURI(t))}catch{return{...g,...e?.defaultFilters}}return t},default:{...g,...e?.defaultFilters},encode:e=>u.ZP.stringify(e),equals:(e,t)=>a.a(e,t)}),m=(0,i.useCallback)(e=>{n({...t,page:g.page,...e})},[t,n]),p=(0,i.useCallback)(e=>Object.values(o.a(t,[...x,...e||[]])).reduce((e,t)=>{if(l.a(t)){if(s.a(t))return f(t)?e:e+1;if(!c.a(t)&&d.a(t)&&"value"in t){let n=t.value;return n?f(n)?e:e+1:e}return e+1}return e},0),[t]),v=(0,i.useCallback)(e=>{m({page:e})},[m]),j=(0,i.useCallback)(()=>{n({...g,...e?.defaultFilters})},[e?.defaultFilters,n]),b=(0,i.useCallback)(({sortBy:e,sortDirection:n})=>{m({sortDirection:void 0!==n?n:"asc"===t.sortDirection?"desc":"asc",sortBy:e})},[m,t.sortDirection]),y=(0,i.useCallback)(e=>({sortDirection:t.sortBy===e?t.sortDirection:void 0,sort:()=>b({sortBy:e})}),[t.sortBy,t.sortDirection,b]);return{filters:{...o.a(t,["page","limit","sortBy","sortDirection"])},sortDirection:t.sortDirection,getActiveFiltersCount:p,sortBy:t.sortBy,limit:t.limit,page:t.page,getSortingProps:y,updateFilter:m,clearFilters:j,updatePage:v,updateSort:b}}}},function(e){e.O(0,[6843,3993,2627,5953,7912,7382,9855,3164,2888,9774,179],function(){return e(e.s=89717)}),_N_E=e.O()}]);